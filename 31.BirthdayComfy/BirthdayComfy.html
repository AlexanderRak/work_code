<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.css" />

<style>

</style>

<div id="BirthdayComfy">

   <div id="myModalpopup" class="modalpopup">
      <div class="modal-content">
         <span class="close"><img src="https://cdn.comfy.ua/media/x/img2/close2.svg" alt=""></span>
         <div class="modal-content__span">
            <span>задонатити</span>
         </div>
         <div class="modal-content__link">
            <a rel="nofollow" target="_blank" href="https://send.monobank.ua/jar/Ag15Ufbq7D">На банку mono</a>
            <a rel="nofollow" target="_blank" href="https://www.liqpay.ua/api/3/checkout?data=eyJ2ZXJzaW9uIjozLCJhY3Rpb24iOiJwYXlkb25hdGUiLCJhbW91bnQiOjUsImN1cnJlbmN5IjoiVUFIIiwiZGVzY3JpcHRpb24iOiLQktC90LXRgdC+0Log0L3QsCDQkdCf0JvQkCDQktCw0LvRjNC60ZbRgNGW0Y8iLCJwdWJsaWNfa2V5IjoiaTk5NTcwMTM5MDc1IiwibGFuZ3VhZ2UiOiJ1ayJ9&signature=Il58fAnjjZwoknhHjCsnXQVAIRQ=">Платіж карткою</a>
            <div class="accordion-wrap">
               <button class="accordion">Задонатити компанією</button>
               <div class="panel">
                  <p>Реквізити для перерхування коштів:</p>
                  <p>БО Благодійний Фонд Сергія Притули</p>
                  <p>IBAN UA353052990000026000046717587</p>
                  <p>ЄДРПОУ 43720363</p>
                  <span style="padding-bottom: 16px; font-weight: 700">Важливо!</span>
                  <span class="textleftd">У призначенні платежу вкажіть «благодійний внесок на БПЛА Валькірія» чи хоча б просто «Валькірія»</span>
               </div>
            </div>
            <!-- <div class="accordion-wrap">
               <button class="accordion">Crypto</button>
               <div class="panel">
                  <p><b>BTC:</b><br>bc1q4f2pms2yewk7fyc7q4gndram7d4ydydcav3qnk</p>
                  <p><b>ETH:</b><br>0xe76c63A0F75645a7Fa51551BAB4AD8CE654225BF</p>
                  <p><b>USDT (Trc20):</b><br>TWaA5yRSQitt4B1TaC1YbQMED2FedqL9vP</p>
               </div>
            </div> -->
            <!-- <a rel="nofollow" target="_blank" href="viber://pa?chatURI=comfy.ua&context=zsuHbhelp"><span class="viberbfr">Списати Comfy-бонуси</span></a> -->
            <a rel="nofollow" href="" class="show-enter-phone-modal">Списати Comfy-бонуси</a>
         </div>
      </div>
   </div>

   <div id="myModal3popup" class="modal3popup">
      <div class="modal-content3">
         <span class="close3"><img src="https://cdn.comfy.ua/media/x/img2/close2.svg" alt=""></span>
         <div class="modal-content__span">
            <span>задонатити</span>
         </div>
         <div class="modal-content__link">
            <a rel="nofollow" target="_blank" href="https://send.monobank.ua/jar/Ag15Ufbq7D">На банку mono</a>
            <a rel="nofollow" target="_blank" href="https://www.liqpay.ua/api/3/checkout?data=eyJ2ZXJzaW9uIjozLCJhY3Rpb24iOiJwYXlkb25hdGUiLCJhbW91bnQiOjUsImN1cnJlbmN5IjoiVUFIIiwiZGVzY3JpcHRpb24iOiLQktC90LXRgdC+0Log0L3QsCDQkdCf0JvQkCDQktCw0LvRjNC60ZbRgNGW0Y8iLCJwdWJsaWNfa2V5IjoiaTk5NTcwMTM5MDc1IiwibGFuZ3VhZ2UiOiJ1ayJ9&signature=Il58fAnjjZwoknhHjCsnXQVAIRQ=">Платіж карткою</a>
            <div class="accordion-wrap">
               <button class="accordion">Задонатити компанією</button>
               <div class="panel">
                  <p>Реквізити для перерхування коштів:</p>
                  <p>БО Благодійний Фонд Сергія Притули</p>
                  <p>IBAN UA353052990000026000046717587</p>
                  <p>ЄДРПОУ 43720363</p>
                  <span style="padding-bottom: 16px; font-weight: 700">Важливо!</span>
                  <span class="textleftd">У призначенні платежу вкажіть «благодійний внесок на БПЛА Валькірія» чи хоча б просто «Валькірія»</span>
               </div>
            </div>
            <!-- <div class="accordion-wrap">
               <button class="accordion">Crypto</button>
               <div class="panel">
                  <p><b>BTC:</b><br>bc1q4f2pms2yewk7fyc7q4gndram7d4ydydcav3qnk</p>
                  <p><b>ETH:</b><br>0xe76c63A0F75645a7Fa51551BAB4AD8CE654225BF</p>
                  <p><b>USDT (Trc20):</b><br>TWaA5yRSQitt4B1TaC1YbQMED2FedqL9vP</p>
               </div>
            </div> -->
            <!-- <a rel="nofollow" target="_blank" href="viber://pa?chatURI=comfy.ua&context=zsuHbhelp"><span class="viberbfr">Списати Comfy-бонуси</span></a> -->
            <a rel="nofollow" class="show-enter-phone-modal">Списати Comfy-бонуси</a>
         </div>
      </div>
   </div>

   <div id="enterPhonePopup" class="bonus-popup-backdrop">
      <div class="bonus-popup-container">
         <span id="bonus-popup__close-btn1" class="bonus-popup__close-btn1">&#215;</span>
         <div>
            <span class="bonus-popup__title"> Введи номер телефону, на якому зареєстровано бонусну картку</span>
         </div>
         <div class="enter-phone-popup__input-block">
            <div class="enter-phone-popup__input-label">Номер телефону</div>
            <input type="tel" id="phoneInput" name="phoneInput" class="enter-phone-popup__input" placeholder="+38(___)___-__-__" minlength=18 maxlength=18 value="" autocomplete="nope" tabindex="1" />
         </div>
         <button id="sendPhoneBtn" class="bonus-popup__btn bonus-popup__btn-disabled" tabindex="2" disabled>
            Відправити
         </button>
      </div>
   </div>

   <div id="noBonusCardPopup" class="bonus-popup-backdrop">
      <div class="bonus-popup-container">
         <span id="bonus-popup__close-btn2" class="bonus-popup__close-btn2">&#215;</span>
         <div class="zero-balance-icon">
            <img src="https://cdn.comfy.ua/media/x/img2/birthday_comfy/cloud.png" />
         </div>

         <div class="bonus-popup__title-block">
            <span class="bonus-popup__title"> Нажаль, за цим номером немає бонусної картки </span>
         </div>

         <div id="enterAnotherPhoneBtn" class="bonus-popup__btn">
            Ввести інший номер телефону
         </div>
      </div>
   </div>

   <div id="zeroBalancePopup" class="bonus-popup-backdrop">
      <div class="bonus-popup-container">
         <span id="bonus-popup__close-btn3" class="bonus-popup__close-btn3">&#215;</span>
         <div class="zero-balance-icon">
            <img src="https://cdn.comfy.ua/media/x/img2/birthday_comfy/cloud.png" />
         </div>

         <div class="bonus-popup__title-block">
            <span class="bonus-popup__title"> Нажаль, на вашому балансі 0 бонусів </span>
         </div>

         <a href="https://comfy.ua/" class="bonus-popup__btn" onclick="setBodyScrolling(true)">
            На головну
         </a>
      </div>
   </div>

   <div id="enterCodePopup" class="bonus-popup-backdrop">
      <div class="bonus-popup-container">
         <span id="bonus-popup__close-btn4" class="bonus-popup__close-btn4">&#215;</span>
         <div>
            <span class="bonus-popup__title"> Підтвердіть операцію </span>
         </div>
         <div class="enter-phone-popup__input-block">
            <div id="codeInputLabel" class="enter-code-popup__input-label">Код з SMS / Viber надісланий на </div>
            <input type="password" id="codeInput" class="enter-phone-popup__input" placeholder="Код" autocomplete="new-password" tabindex="3" />
            <div id="enterCodePopupError" class="enter-code-popup__error"></div>
            <div id="showCode" class="enter-code-popup__input-post-label">Показати код</div>
         </div>
         <button id="sendCodeBtn" class="bonus-popup__btn bonus-popup__btn-disabled" tabindex="4" disabled>
            Відправити
         </button>
         <div id="resendCodeBtn" class="bonus-popup__white-btn" tabindex="5">Вислати код ще раз</div>
         <div id="changePhoneNumBtn" class="bonus-popup__white-btn" tabindex="6">Змінити номер телефону</div>
      </div>
   </div>

   <div id="enterBonusSumPopup" class="bonus-popup-backdrop">
      <div class="bonus-popup-container">
         <span id="bonus-popup__close-btn5" class="bonus-popup__close-btn5">&#215;</span>
         <div class="enter-bonus-sum-popup__title-block">
            <span id="bonusAmountOrange" class="enter-bonus-sum-popup__bonus-amount-orange"></span>
            <span class="bonus-popup__title"> Доступні бонуси </span>
         </div>
         <div class="enter-phone-popup__input-block">
            <div class="enter-bonus-sum-popup__text">Обери, скількі бонусів бажаєш перевести на допомогу ЗСУ</div>

            <input class="css-checkbox" type="checkbox" id="writeOffAll" name="writeOffAll" tabindex="7" checked />
            <label for="writeOffAll" class="enter-bonus-sum-popup__label">
               Перевести всі бонуси:
               <span id="bonusAmountGreen" class="enter-bonus-sum-popup__bonus-amount-green"></span>
            </label><br>

            <input type="text" id="bonusesToWriteOffInput" class="enter-bonus-sum-popup__input" placeholder="або введіть суму" tabindex="8" disabled />
         </div>
         <button id="sendBonusesBtn" class="bonus-popup__btn" tabindex="9">
            Відправити
         </button>
      </div>
   </div>

   <div id="successBonusPopup" class="bonus-popup-backdrop">
      <div class="bonus-popup-container">
         <span id="bonus-popup__close-btn6" class="bonus-popup__close-btn6">&#215;</span>
         <div>
            <img src="https://cdn.comfy.ua/media/x/img2/birthday_comfy/flag.png" />
         </div>

         <div class="bonus-popup__success-title-block">
            <span class="bonus-popup__title"> Дякуюємо, ваші бонуси були перераховані </span>
         </div>

         <a href="https://comfy.ua/" class="bonus-popup__btn" onclick="setBodyScrolling(true)">
            На головну
         </a>
      </div>
   </div>

   <button id="myBtn3popup" class="myBtn3 wow animate__animated animate__fadeInUp" data-wow-delay="0.5s">задонатити</button>


   <div class="birthday-comfy-section1 max-width-block">
      <div class="birthday-comfy-section1__wrap">

         <div class="birthday-comfy-section1__text3 wow animate__animated animate__fadeInUp" data-wow-delay="0.7s">
            <h2>Донать з COMFY <span class="word-wrap">на зграю Валькірій</span></h2>
         </div>
         <div class="birthday-comfy-section1__img2-pos wow animate__animated animate__fadeIn" data-wow-delay="0.7s">
            <img src="https://cdn.comfy.ua/media/x/img2/birthday_comfy/img2.png" alt="">
         </div>
         <div class="birthday-comfy-section1__img2-pos-onlymob wow animate__animated animate__fadeIn" data-wow-delay="0.7s"></div>
         <div class="birthday-comfy-section1__text4 font-size-text_34px talign-left wow animate__animated animate__fadeInUp" data-wow-delay="0.8s">
            <p>Разом з Благодійним фондом Сергія Притули <span class="word-wrap2">ми збираємо на 15 комплексів БПЛА Валькірія</span></p>
         </div>
         <div class="birthday-comfy-section1__img3 wow animate__animated animate__fadeInUp" data-wow-delay="0.9s">
            <img src="https://cdn.comfy.ua/media/x/img2/birthday_comfy/img3.png" alt="">
         </div>
      </div>
   </div>

   <div class="birthday-comfy-section3-popup">
      <div class="birthday-comfy-section2__popup wow animate__animated animate__fadeInUp" data-wow-delay="0.5s">
         <button id="myBtnpopup" class="myBtn1">задонатити</button>
      </div>
   </div>

   <div class="birthday-comfy-section2 max-width-block">
      <div class="birthday-comfy-section2__wrap">

         <div class="birthday-comfy-section2__text2 font-size-text_40px talign-center wow animate__animated animate__fadeInUp" data-wow-delay="0.5s">
            <p>Перші 500 000 грн ми вже закинули, долучайся</p>
         </div>
         <div class="birthday-comfy-section2__collectedintotal wow animate__animated animate__fadeInUp" data-wow-delay="0.5s">
            <div class="birthday-comfy-section2__collectedintotal-text font-size-text_34px_uppercase talign-center">
               <p>всього зібрали 10 002 375 грн</p>
            </div>

            <div class="birthday-comfy-section2__valk-flex wow animate__animated animate__fadeInUp" data-wow-delay="0.5s">
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk1.svg" alt=""></div>

               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk4.svg" alt=""></div>
               <div class="birthday-comfy-section2__valk-item"><img src="https://cdn.comfy.ua/media/x/img2/valk3.svg" alt=""></div>
            </div>

         </div>

      </div>
   </div>

   <div class="birthday-comfy-section2 max-width-block">
      <div class="birthday-comfy-section2__wrap">

         <div class="birthday-comfy-section2__img-sum onlydesk wow animate__animated animate__fadeInUp" data-wow-delay="0.5s">
            <img src="https://cdn.comfy.ua/media/x/img2/birthday_comfy/img6.svg" alt="">
         </div>
         <div class="birthday-comfy-section2__img-sum onlymob wow animate__animated animate__fadeInUp" data-wow-delay="0.5s">
            <img src="https://cdn.comfy.ua/media/x/img2/birthday_comfy/img6mob.svg" alt="">
         </div>

         <div class="birthday-comfy-section2__text1 font-size-text_34px talign-center wow animate__animated animate__fadeInUp" data-wow-delay="0.5s">
            <p>Один комплекс — це наземна станція та два БПЛА. <span class="word-wrap2">Виходить, цілих 30 БПЛА. Симпатично.</span></p>
         </div>
         <div class="birthday-comfy-section2__line-img wow animate__animated animate__fadeInUp" data-wow-delay="0.5s">
            <img src="https://cdn.comfy.ua/media/x/img2/birthday_comfy/img4.svg" alt="">
         </div>
         <div class="birthday-comfy-section2__flex wow animate__animated animate__fadeInUp" data-wow-delay="0.5s">
            <div class="birthday-comfy-section2__item">
               <img src="https://cdn.comfy.ua/media/x/img2/birthday_comfy/img5new.png" alt="">
            </div>
            <div class="birthday-comfy-section2__item">
               <div class="birthday-comfy-section2__flex-item-content">
                  <div class="birthday-comfy-section2__flex-item-text1 font-size-text_26px talign-left">
                     <p>Валькірія – єдина з працюючих зараз на лінії фронту пташок, яку практично неможливо покласти.</p>
                  </div>
                  <div class="birthday-comfy-section2__flex-item-text2 font-size-text_22px talign-left">
                     <p>Вона годиться і для розвідки, і для корегування вогню. Вміє 4к фотки вдень і вночі, легко ремонтується скотчем прямо в полі та виробляється в Україні.</p>
                  </div>
                  <div class="birthday-comfy-section2__flex-item-text3 font-size-text_22px talign-left">
                     <p>Як бачиш, гарнезний гаджет, треба брать.</p>
                  </div>
               </div>
            </div>
         </div>

      </div>
   </div>

</div>

<script>
   document.addEventListener('DOMContentLoaded', function () {

      var modal = document.getElementById("myModalpopup");
      var btn = document.getElementById("myBtnpopup");
      var span = document.getElementsByClassName("close")[0];
      btn.onclick = function () {
         modal.style.display = "block";
      }
      span.onclick = function () {
         modal.style.display = "none";
      }
      document.addEventListener('click', function (e) {
         if (e.target == modal) {
            modal.style.display = "none";
         }
      });

      var modal3 = document.getElementById("myModal3popup");
      var btn3 = document.getElementById("myBtn3popup");
      var span3 = document.getElementsByClassName("close3")[0];
      btn3.onclick = function () {
         modal3.style.display = "block";
      }
      span3.onclick = function () {
         modal3.style.display = "none";
      }
      document.addEventListener('click', function (e3) {
         if (e3.target == modal3) {
            modal3.style.display = "none";
         }
      });

      var acc = document.getElementsByClassName("accordion");
      var i;

      for (i = 0; i < acc.length; i++) {
         acc[i].addEventListener("click", function () {
            this.classList.toggle("active_acrdion");
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
               panel.style.maxHeight = null;
            } else {
               panel.style.maxHeight = panel.scrollHeight + "px";
            }
         });
      }


      // bonuses scripts
      const host = "https://comfy.ua";

      let bonusCardBalance;
      let isBonusCardExist;

      let btnShowEnterPhoneModal = document.getElementsByClassName("show-enter-phone-modal")[0];
      let btnShowEnterPhoneModal2 = document.getElementsByClassName("show-enter-phone-modal")[1];

      let enterPhoneModal = document.getElementById("enterPhonePopup");
      let noBonusCardPopup = document.getElementById("noBonusCardPopup");
      let zeroBalancePopup = document.getElementById("zeroBalancePopup");
      let enterCodePopup = document.getElementById("enterCodePopup");
      let successBonusPopup = document.getElementById("successBonusPopup");
      let enterBonusSumPopup = document.getElementById("enterBonusSumPopup");

      let sendPhoneBtn = document.getElementById("sendPhoneBtn");
      let phoneInput = document.getElementById("phoneInput");
      let enterAnotherPhoneBtn = document.getElementById("enterAnotherPhoneBtn");
      let changePhoneNumBtn = document.getElementById("changePhoneNumBtn");

      let sendCodeBtn = document.getElementById("sendCodeBtn");
      let resendCodeBtn = document.getElementById("resendCodeBtn");
      let showCode = document.getElementById("showCode");
      let codeInput = document.getElementById("codeInput");
      let bonusAmountGreen = document.getElementById("bonusAmountGreen");
      let bonusAmountOrange = document.getElementById("bonusAmountOrange");
      let bonusesToWriteOffInput = document.getElementById("bonusesToWriteOffInput");
      let writeOffAllCheckbox = document.getElementById("writeOffAll");
      let sendBonusesBtn = document.getElementById("sendBonusesBtn");
      let closeBtn1 = document.getElementById("bonus-popup__close-btn1");
      let closeBtn2 = document.getElementById("bonus-popup__close-btn2");
      let closeBtn3 = document.getElementById("bonus-popup__close-btn3");
      let closeBtn4 = document.getElementById("bonus-popup__close-btn4");
      let closeBtn5 = document.getElementById("bonus-popup__close-btn5");
      let closeBtn6 = document.getElementById("bonus-popup__close-btn6");

      let cntOfCodeRequests = 0;

      closeBtn1.onclick = function () {
         closeActions();
      }

      closeBtn2.onclick = function () {
         closeActions();
      }

      closeBtn3.onclick = function () {
         closeActions();
      }

      closeBtn4.onclick = function () {
         closeActions();
      }

      closeBtn5.onclick = function () {
         closeActions();
      }

      closeBtn6.onclick = function () {
         closeActions();
      }

      function closeBonusZSUPopups() {
         enterPhoneModal.style.display = "none";
         noBonusCardPopup.style.display = "none";
         zeroBalancePopup.style.display = "none";
         enterCodePopup.style.display = "none";
         successBonusPopup.style.display = "none";
         enterBonusSumPopup.style.display = "none";
      }

      function closeActions() {
         closeBonusZSUPopups();
         setBodyScrolling(true);
         clear();
      }

      function setBodyScrolling(enabled) {
         let body = document.getElementsByTagName("body")[0];

         if (enabled) {
            body.style.overflow = "auto";
         } else {
            body.style.overflow = "hidden";
         }
      }

      phoneInput.addEventListener('input', function (e) {

         if (e.inputType === 'deleteContentBackward') {
            e.target.value = e.target.value.slice(0, e.target.value.length)
         } else {
            var num = e.target.value.replace(/\D/g, '');
            var res = '';

            if (!num.length && e.data === "+") {
               res = '+38(';
            }

            if (num.length == 1) {
               if (num[0] === '3' || num[0] === '8') {
                  res = '+38(';
               } else {
                  res = `+38(${num[0]}`;
               }
            }

            if (num.length >= 3 && num.length <= 5) {
               res = `+38(${num.slice(2)}${num.length == 5 ? ')-' : ''}`;
            }

            if (num.length > 5 && num.length <= 8) {
               res = `+38(${num.slice(2, 5)})-${num.slice(5)}${num.length == 8 ? '-' : ''}`;
            }

            if (num.length > 8 && num.length <= 10) {
               res = `+38(${num.slice(2, 5)})-${num.slice(5, 8)}-${num.slice(8)}${num.length == 10 ? '-' : ''}`;
            }

            if (num.length > 10 && num.length <= 12) {
               res = `+38(${num.slice(2, 5)})-${num.slice(5, 8)}-${num.slice(8, 10)}-${num.slice(10)}`;
            }

            e.target.value = res
         }

         if (validatePhone(e.target.value.replace(/\D/g, ''))) {
            sendPhoneBtn.disabled = false;
            sendPhoneBtn.classList.remove("bonus-popup__btn-disabled");
         } else {
            sendPhoneBtn.disabled = true;
            if (!sendPhoneBtn.classList.contains("bonus-popup__btn-disabled")) {
               sendPhoneBtn.classList.add("bonus-popup__btn-disabled");
            }
         }
      });

      codeInput.addEventListener('input', function (e) {
         e.target.value = e.target.value.replace(/\D/g, '');

         if (validateCode(e.target.value)) {
            sendCodeBtn.disabled = false;
            sendCodeBtn.classList.remove("bonus-popup__btn-disabled");
         } else {
            sendCodeBtn.disabled = true;
            if (!sendCodeBtn.classList.contains("bonus-popup__btn-disabled")) {
               sendCodeBtn.classList.add("bonus-popup__btn-disabled");
            }
         }
      });

      bonusesToWriteOffInput.addEventListener('input', function (e) {
         e.target.value = e.target.value.replace(/\D/g, '');

         if (bonusCardBalance && e.target.value > bonusCardBalance) {
            e.target.value = bonusCardBalance;
         }

         if (e.target.value) {
            sendBonusesBtn.disabled = false;
            sendBonusesBtn.classList.remove("bonus-popup__btn-disabled");
         }
      });

      btnShowEnterPhoneModal.onclick = function (event) {
         event.preventDefault();
         modal.style.display = "none";
         modal3.style.display = "none";
         enterPhoneModal.style.display = "block";
         setBodyScrolling(false);
         clear();
         phoneInput.focus();
      }

      btnShowEnterPhoneModal2.onclick = function (event) {
         event.preventDefault();
         modal3.style.display = "none";
         enterPhoneModal.style.display = "block";
         setBodyScrolling(false);
         clear();
         phoneInput.focus();
      }

      function clear() {
         phoneInput.value = "";
         bonusCardBalance = undefined;
         isBonusCardExist = undefined;
         codeInput.value = "";
         bonusAmountGreen.textContent = "";
         bonusAmountOrange.textContent = "";
         bonusesToWriteOffInput.value = "";
         writeOffAllCheckbox.checked = true;
         bonusesToWriteOffInput.disabled = true;
         cntOfCodeRequests = 0;
      }

      function validatePhone(value) {
         return value.match(/^((\+?3)?8)?0\d{9}$/) != null;
      }

      function validateCode(value) {
         return value.match(/^\d{4}$/) != null;
      }

      sendPhoneBtn.onclick = function () {
         sendPhone();
      }

      sendCodeBtn.onclick = function () {
         sendCode();
      }

      resendCodeBtn.onclick = function () {
         sendPhone();
      }

      showCode.onclick = function () {
         toggleCodeVisibility();
      }

      writeOffAllCheckbox.onchange = function (checkboxElem) {
         if (checkboxElem.currentTarget.checked) {
            bonusesToWriteOffInput.value = "";
            bonusesToWriteOffInput.disabled = true;
            sendBonusesBtn.disabled = false;
            sendBonusesBtn.classList.remove("bonus-popup__btn-disabled");
         } else {
            bonusesToWriteOffInput.disabled = false;
            bonusesToWriteOffInput.focus();
            sendBonusesBtn.disabled = true;

            if (!sendBonusesBtn.classList.contains("bonus-popup__btn-disabled")) {
               sendBonusesBtn.classList.add("bonus-popup__btn-disabled");
            }
         }
      }

      sendBonusesBtn.onclick = function () {
         sendBonuses();
      }

      enterAnotherPhoneBtn.onclick = function () {
         noBonusCardPopup.style.display = "none";
         phoneInput.value = "";
         enterPhoneModal.style.display = "block";
         setBodyScrolling(false);
      }

      changePhoneNumBtn.onclick = function () {
         enterCodePopup.style.display = "none";
         phoneInput.value = "";
         enterPhoneModal.style.display = "block";
         setBodyScrolling(false);
      }

      function buildSendPhoneRequest(phone) {
         const request = {
            "ops": [{
               "type": "create",
               "obj": "task",
               "conv_id": 10493,
               "data": {
                  "phone": phone
               }
            }]
         };

         return request;
      }

      function buildConfirmCodeRequest(phone, code) {
         const request = {
            "ops": [{
               "type": "create",
               "obj": "task",
               "conv_id": 10545,
               "data": {
                  "phone": phone,
                  "otp": code
               }
            }]
         };

         return request;
      }

      function buildWriteOffBonusesRequest(phone, bonusesToWriteOff) {
         const request = {
            "ops": [{
               "type": "create",
               "obj": "task",
               "conv_id": 10547,
               "data": {
                  "phone": phone,
                  "amount": bonusesToWriteOff
               }
            }]
         };

         return request;
      }

      async function sendPhone() {

         let request = buildSendPhoneRequest(phoneInput.value.replace(/\D/g, ''));
         let response = await sendRequestToCorezoid(`${host}/api/corezoid/invoke/get_bonuses_and_send_otp`, request)

         proccessSendPhoneResponse(response);
      }

      async function sendCode() {
         if (cntOfCodeRequests > 5) {
            showError("enterCodePopupError", "Перевищено кількість спроб");
            return;
         }

         let phone = phoneInput.value.replace(/\D/g, '');

         let request = buildConfirmCodeRequest(phone, codeInput.value);
         let response = await sendRequestToCorezoid(`${host}/api/corezoid/invoke/check_bonuses_otp`, request)

         cntOfCodeRequests += 1;

         proccessSendCodeResponse(response);
      }

      async function sendBonuses() {
         let writeOffBonusesInput = document.getElementById("bonusesToWriteOffInput");
         let phone = phoneInput.value.replace(/\D/g, '');
         let writeOffBonusesAmount = 0;

         var writeOffAllCheckbox = document.getElementById("writeOffAll");

         writeOffBonusesAmount = writeOffAllCheckbox.checked ? bonusCardBalance : writeOffBonusesInput.value;

         let request = buildWriteOffBonusesRequest(phone, writeOffBonusesAmount);
         let response = await sendRequestToCorezoid(`${host}/api/corezoid/invoke/transfer_bonuses`, request)

         proccessWriteOffBonusesResponse(response);
      }

      async function sendRequestToCorezoid(url, request) {
         let httpResponse = await fetch(url, {
            method: 'POST',
            headers: {
               'Content-Type': 'application/json; charset=utf8'
            },
            body: JSON.stringify(request)
         });

         if (httpResponse.ok) {
            let response = await httpResponse.json();

            return response;
         } else {
            //todo: Вывести ошибку 
            console.log(httpResponse);
         }
      }

      function proccessSendPhoneResponse(response) {
         if (response.request_proc && response.request_proc === "ok") {

            let info = response.ops[0].data?.info
            //bonus card not found
            if (info?.result === "not_found") {
               isBonusCardExist = false;
               bonusCardBalance = undefined;
               enterPhoneModal.style.display = "none";
               noBonusCardPopup.style.display = "block";
               setBodyScrolling(false);
               return;
            }

            //bonus card exists but zero balance
            if (info?.result === "ok") {
               isBonusCardExist = true;

               if (info?.availableBalance === 0) {
                  bonusCardBalance = 0;
                  enterPhoneModal.style.display = "none";
                  zeroBalancePopup.style.display = "block";
                  setBodyScrolling(false);
                  return;
               }

               if (info?.availableBalance > 0) {
                  bonusCardBalance = info?.availableBalance;
                  bonusAmountGreen.textContent = bonusAmountOrange.textContent = info?.availableBalance.toString() + '₴';

                  enterPhoneModal.style.display = "none";

                  let codeInputLabel = document.getElementById("codeInputLabel");

                  codeInputLabel.innerHTML = `Код з SMS / Viber надісланий на <br>${phoneInput.value}`

                  enterCodePopup.style.display = "block";

                  codeInput.focus();

                  setBodyScrolling(false);
                  return;
               }
            }
         }
      }

      function proccessSendCodeResponse(response) {
         if (response.request_proc && response.request_proc === "ok") {

            let info = response.ops[0].data?.info

            if (info?.result === "ok") {
               enterCodePopup.style.display = "none";
               enterBonusSumPopup.style.display = "block";
               setBodyScrolling(false);
               return;
            }

            if (info?.result === "wrong") {
               showError("enterCodePopupError", "Невірний код")
            }
         }
      }

      function proccessWriteOffBonusesResponse(response) {
         console.log(response);

         if (response.request_proc && response.request_proc === "ok") {

            let info = response.ops[0].data?.info

            if (info?.result === "ok") {
               enterBonusSumPopup.style.display = "none";
               successBonusPopup.style.display = "block";
               setBodyScrolling(false);
               return;
            }

            if (info?.result === "wrong") {
               //todo show code error
            }

         }
      }

      function toggleCodeVisibility() {
         let showCode = document.getElementById("showCode");

         if (codeInput.type === "password") {
            codeInput.type = "text";
            showCode.innerHTML = "Приховати код";
         } else {
            codeInput.type = "password";
            showCode.innerHTML = "Показати код";
         }
      }

      function showError(elementId, message) {
         let el = document.getElementById(elementId);

         if (el) {
            el.textContent = message;
            el.style.display = "block";

            setTimeout(() => el.style.display = "none", 3000);
         }
      }

   });

</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js" integrity="sha512-Eak/29OTpb36LLo2r47IpVzPBLXnAMPAVypbSZiZ4Qkf8p/7S/XRG5xp7OKWPPYfJT6metI+IORkR5G8F900+g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
   var wow = new WOW(
      {
         boxClass: 'wow',
         animateClass: 'animated',
         offset: 10,
         mobile: true,
         live: true,
         callback: function (box) {
         },
         scrollContainer: null,
         resetAnimation: true,
      }
   );
   wow.init();
</script>