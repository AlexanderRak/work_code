<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
   <link rel="stylesheet" href="style.css">
</head>

<body>
   <style>

   </style>
   <div id="app-results-year">

      <div class="results-year-header">
         <div class="results-year-header__container results-year-header__bgrd">
            <div class="results-year-header__logo">
               <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/h_logo.svg" alt="">
            </div>
            <div class="results-year-header__img"></div>
         </div>
      </div>

      <div v-show="statActive == true" class="results-year-lk --inlogin">
         <div class="results-year-lk__conatiner">

            <div v-show="prod_salesCheck > 0" class="results-year-lk__datais data__available">

               <div class="results-year-lk__best-seller">
                  <div class="results-year-lk__best-seller__img1">
                     <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img1.svg" alt="">
                  </div>
                  <div class="results-year-lk__best-seller__txt1">
                     Ви увійшли у {{ segmentNumber }}% найактивніших покупців в історії COMFY
                  </div>
                  <div class="results-year-lk__best-seller__img2">
                     <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img2.svg" alt="">
                  </div>
                  <div class="results-year-lk__best-seller__img-pos">
                     <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img3.png" alt="">
                  </div>
               </div>

               <div class="results-year-lk__user-activity">
                  <div class="results-year-lk__user-activity__grid grid-inlogin">
                     <div class="results-year-lk__user-activity__item">
                        <div class="results-year-lk__user-activity__txt1">
                           <div class="results-year-lk__user-activity__txt0">
                              ТОП 3
                           </div>
                           В COMFY є безліч категорій, але 3 з них були вашими найулюбленішими
                        </div>
                     </div>
                     <div class="results-year-lk__user-activity__item --flex-start">
                        <div class="results-year-lk__user-activity__inform">
                           <div class="results-year-lk__user-activity__img">
                              <div class="results-year-lk__user-activity__nums">1</div>
                              <picture>
                                 <source srcset="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img_top1_mob.svg" media="(max-width: 480px)" />
                                 <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img_top1.svg" alt="" />
                              </picture>
                           </div>
                           <div class="results-year-lk__user-activity__txt2">
                              {{ prod_topCategories_1 }}
                           </div>
                        </div>
                     </div>
                     <div class="results-year-lk__user-activity__item --flex-start">
                        <div class="results-year-lk__user-activity__inform">
                           <div class="results-year-lk__user-activity__img">
                              <div class="results-year-lk__user-activity__nums">2</div>
                              <picture>
                                 <source srcset="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img_top2_mob.svg" media="(max-width: 480px)" />
                                 <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img_top2.svg" alt="" />
                              </picture>
                           </div>
                           <div class="results-year-lk__user-activity__txt2">
                              {{ prod_topCategories_2 }}
                           </div>
                        </div>
                     </div>
                     <div class="results-year-lk__user-activity__item --flex-start">
                        <div class="results-year-lk__user-activity__inform">
                           <div class="results-year-lk__user-activity__img">
                              <div class="results-year-lk__user-activity__nums">3</div>
                              <picture>
                                 <source srcset="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img_top3_mob.svg" media="(max-width: 480px)" />
                                 <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img_top3.svg" alt="" />
                              </picture>
                           </div>
                           <div class="results-year-lk__user-activity__txt2">
                              {{ prod_topCategories_3 }}
                           </div>
                        </div>
                     </div>
                  </div>
               </div>

               <div class="results-year-lk__user-statistics">
                  <div class="results-year-lk__user-statistics__item statistics__bgrd1">
                     <div class="results-year-lk__user-statistics__text statistics__elips1">
                        <div class="results-year-lk__user-statistics__txt1">
                           10 500
                        </div>
                        <div class="results-year-lk__user-statistics__txt2">
                           Разів ви завітали до інтернет-магазину COMFY цього року
                        </div>
                     </div>
                     <div class="results-year-lk__user-statistics__img-pos">
                        <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img_ctg1.svg" alt="">
                     </div>
                  </div>
                  <div class="results-year-lk__user-statistics__item-only-mob">
                     <div class="results-year-lk__user-statistics__item-imgpos-mob">
                        <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img4.png" alt="">
                     </div>
                  </div>
                  <div class="results-year-lk__user-statistics__item statistics__bgrd2">
                     <div class="results-year-lk__user-statistics__text statistics__elips2">
                        <div class="results-year-lk__user-statistics__txt1">
                           10 500
                        </div>
                        <div class="results-year-lk__user-statistics__txt2">
                           Покупок ви зробили у COMFY
                        </div>
                     </div>
                     <div class="results-year-lk__user-statistics__img-pos img-pos-nstl">
                        <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img_ctg2.svg" alt="">
                     </div>
                  </div>
                  <div class="results-year-lk__user-statistics__item statistics__bgrd3">
                     <div class="results-year-lk__user-statistics__text statistics__elips3">
                        <div class="results-year-lk__user-statistics__txt1">
                           10 500
                        </div>
                        <div class="results-year-lk__user-statistics__txt2">
                           За це ми нарахували вам от стільки COMFY-бонусів
                        </div>
                     </div>
                     <div class="results-year-lk__user-statistics__img-pos">
                        <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img_ctg3.svg" alt="">
                     </div>
                  </div>
               </div>

            </div>

            <div v-show="prod_salesCheck === 0" class="results-year-lk__datais data__notavailable">

               <div class="results-year-lk-notavailable">
                  <div class="results-year-lk-notavailable__container">
                     <div class="results-year-lk-notavailable__item">
                        <div class="results-year-lk-notavailable__content">
                           <div class="results-year-lk-notavailable__txt1">
                              Нажаль на даний момент нема статистики по вашому особистому кабінету, але ніколи не запізно додати щось до неї
                           </div>
                           <a href="#" class="results-year-lk-notavailable__link">
                              Почати свою історію COMFY
                           </a>
                        </div>
                     </div>
                     <div class="results-year-lk-notavailable__item">
                        <div class="results-year-lk-notavailable__img-pos1">
                           <img src="https://cdn.comfy.ua/media/x/img3/zg1nw.svg" alt="">
                        </div>
                        <div class="results-year-lk-notavailable__img-pos2">
                           <img src="https://cdn.comfy.ua/media/x/img3/zg2.svg" alt="">
                        </div>
                     </div>
                  </div>
               </div>

            </div>

         </div>
      </div>

      <div v-show="statActive == false" class="results-year-lk --notinlogin">
         <div class="results-year-lk__conatiner">

            <div class="results-year-lk__user-activity">
               <div class="results-year-lk__user-activity__grid">
                  <div class="results-year-lk__user-activity__item">
                     <div class="results-year-lk__user-activity__txt1">
                        Увійдіть до особистого кабінету та подивіться власну історію COMFY за 2022-й. Ми зібрали вашу власну аналітику року з підсумками вашої активності.
                     </div>
                  </div>
                  <div class="results-year-lk__user-activity__item --flex-end">
                     <div class="results-year-lk__user-activity__inform">
                        <div class="results-year-lk__user-activity__img">
                           <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/ntl_img1.svg" alt="">
                        </div>
                        <div class="results-year-lk__user-activity__txt2">
                           Скільки покупок <span class="word-wrap">зробили</span>
                        </div>
                     </div>
                  </div>
                  <div class="results-year-lk__user-activity__item --flex-end">
                     <div class="results-year-lk__user-activity__inform">
                        <div class="results-year-lk__user-activity__img">
                           <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/ntl_img2.svg" alt="">
                        </div>
                        <div class="results-year-lk__user-activity__txt2">
                           Скільки разів ви <span class="word-wrap">завітали у COMFY</span>
                        </div>
                     </div>
                  </div>
                  <div class="results-year-lk__user-activity__item --flex-end">
                     <div class="results-year-lk__user-activity__inform">
                        <div class="results-year-lk__user-activity__img">
                           <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/ntl_img3.svg" alt="">
                        </div>
                        <div class="results-year-lk__user-activity__txt2">
                           Скільки бонусів <span class="word-wrap">отримали</span>
                        </div>
                     </div>
                  </div>
               </div>
            </div>

         </div>
      </div>

      <div class="results-year-general-statistics">
         <div class="results-year-lk__conatiner">

            <div class="results-year-lk__best-seller">
               <div class="results-year-lk__best-seller__img1">
                  <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img1.svg" alt="">
               </div>
               <div class="results-year-lk__best-seller__txt1">
                  <span style="text-transform: uppercase;">comfy</span> цього року
               </div>
               <div class="results-year-lk__best-seller__img2">
                  <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/l_img2.svg" alt="">
               </div>
               <div class="results-year-lk__best-seller__img-pos2">
                  <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/al_img_2bl1.png" alt="">
               </div>
            </div>

            <div class="results-year-newgeneral-statistics__container">
               <div class="results-year-newgeneral-statistics__flex-block1">
                  <div class="results-year-newgeneral-statistics__left">
                     <div class="results-year-newgeneral-statistics__flex">
                        <div class="results-year-newgeneral-statistics__item itm1 elips1">
                           <div class="newgeneral-contant">
                              <div class="newgeneral__txt1">100 500</div>
                              <div class="newgeneral__txt2">стільки акцій ми провели для вас у 2023-му</div>
                           </div>
                           <div class="newgeneral-pos pos__img1">
                              <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/nwb_img1.svg" alt="">
                           </div>
                        </div>
                        <div class="results-year-newgeneral-statistics__item itm2 elips2">
                           <div class="newgeneral-contant">
                              <div class="newgeneral__txt1">100 500</div>
                              <div class="newgeneral__txt2">бонусів отримали наші клієнти</div>
                           </div>
                        </div>
                        <div class="results-year-newgeneral-statistics__item itm3 elips1">
                           <div class="newgeneral-contant">
                              <div class="newgeneral__txt1">100 550</div>
                              <div class="newgeneral__txt2">товарів ми продавали щохвилини</div>
                           </div>
                           <div class="newgeneral-pos pos__img3">
                              <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/nwb_img3.svg" alt="">
                           </div>
                        </div>
                     </div>
                     <div class="results-year-newgeneral-statistics__flex">
                        <div class="results-year-newgeneral-statistics__item itm4 elips2">
                           <div class="newgeneral-contant">
                              <div class="newgeneral__txt1">100 500</div>
                              <div class="newgeneral__txt2">ваших дзвінків та звернень в чат підтримки ми обробляли кожної хвилини</div>
                           </div>
                           <div class="newgeneral-pos pos__img4">
                              <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/nwb_img5.svg" alt="">
                           </div>
                        </div>
                        <div class="results-year-newgeneral-statistics__item itm5 elips1">
                           <div class="newgeneral-contant">
                              <div class="newgeneral__txt1">50</div>
                              <div class="newgeneral__txt2">магазинів ми відкрили лише впродовж цього року</div>
                           </div>
                        </div>
                        <div class="results-year-newgeneral-statistics__item itm6 elips1">
                           <div class="newgeneral-contant">
                              <div class="newgeneral__txt1">100 500</div>
                              <div class="newgeneral__txt2">стільки населених пунктів ми доставляли ваші замовлення у</div>
                           </div>
                        </div>
                        <div class="results-year-newgeneral-statistics__item itm7 elips2">
                           <div class="newgeneral-contant">
                              <div class="newgeneral__txt1">80%</div>
                              <div class="newgeneral__txt2">українських родин цього року купували у COMFY</div>
                           </div>
                           <div class="newgeneral-pos pos__img7">
                              <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/nwb_img4.svg" alt="">
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="results-year-newgeneral-statistics__right">
                     <div class="results-year-newgeneral-statistics__item itm7 elips2">
                        <div class="newgeneral-contant">
                           <div class="newgeneral__txt1">80%</div>
                           <div class="newgeneral__txt2">українських родин цього року купували у COMFY</div>
                        </div>
                        <div class="newgeneral-pos pos__img7">
                           <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/nwb_img4.svg" alt="">
                        </div>
                     </div>
                  </div>
               </div>
               <div class="results-year-newgeneral-statistics__flex-block1">
                  <div class="results-year-newgeneral-statistics__flex flexlast">
                     <div class="results-year-newgeneral-statistics__item itm8 elips1">
                        <div class="newgeneral-contant">
                           <div class="newgeneral__txt1">100 500</div>
                           <div class="newgeneral__txt2">стільки доставок ми зробили</div>
                        </div>
                     </div>
                     <div class="results-year-newgeneral-statistics__item itm9 elips3">
                        <div class="newgeneral-contant">
                           <div class="newgeneral__txt1">100 500</div>
                           <div class="newgeneral__txt2">КРАЩів ви купили в цьому році, бо КРАЩ — справжній топ за свої гроші</div>
                        </div>
                        <div class="newgeneral-pos pos__img9">
                           <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/nwb_img9l.svg" alt="">
                        </div>
                        <div class="newgeneral-pos pos__img10">
                           <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/nwb_img9r.svg" alt="">
                        </div>
                     </div>
                     <div class="results-year-newgeneral-statistics__item itm10 elips1">
                        <div class="newgeneral-contant">
                           <div class="newgeneral__txt1">100 500</div>
                           <div class="newgeneral__txt2">вакансій було відкрито в COMFY цього року</div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>

         <div class="results-year-lk__best-seller-footer">
            <div class="results-year-lk__best-seller-footer__img1">
               <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/img1_big1.svg" alt="">
            </div>
            <div class="results-year-lk__best-seller-footer__txt1">
               COMFY — #намберван по домашнім гаджетам, а ви — намберван наших сердець. Дякуємо, що були з нами впродовж 2023-го, попереду ще багато цікавого 💚🧡<br>З новим роком. Бережіть себе і близьких та заходьте в гості з приводом і просто подивитися :)
            </div>
            <a href="#" class="results-year-lk__best-seller-footer__link">
               Продовжити свою історію COMFY
            </a>
            <div class="results-year-lk__best-seller-footer__img2">
               <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/img1_big2.svg" alt="">
            </div>
            <div class="results-year-lk__best-seller-footer__img-pos">
               <img src="https://cdn.comfy.ua/media/x/img3/resultsyear2023/al_img_4.png" alt="">
            </div>
         </div>

      </div>
   </div>


   <script>
      document.addEventListener("DOMContentLoaded", (event) => {
         new Vue({
            el: '#app-results-year',
            data: {
               statActive: window.__INITIAL_STATE__.auth.authInfo.user.verified,
               intervalId: null,
               message: "",
               prod_salesCheck: null,
               segmentNumber: 0,
               prod_topCategories_1: "",
               prod_topCategories_2: "",
               prod_topCategories_3: ""
            },
            created() {
               this.intervalId = setInterval(this.checkVerifiedStatus, 2000);
            },
            methods: {
               checkVerifiedStatus() {
                  const newValueFromServer = window.__INITIAL_STATE__.auth.authInfo.user.verified;

                  if (newValueFromServer === true) {
                     this.statActive = true;
                     clearInterval(this.intervalId);
                     //window.location.reload();

                     const userPhone = window.__INITIAL_STATE__.auth.authInfo.user.phone;
                     this.getInfoUser(userPhone);

                  } else {
                     console.log("false");
                  }
               },
               getInfoUser(userPhone) {
                  let requestURL = `https://comfy.ua/api/customers/${userPhone}/results`;
                  // https://comfy.ua/api/customers/380631158878/results
                  function sendRequest(method, url) {

                     return fetch(url, {
                        method: 'GET',
                        headers: {
                           "Context-type": "application/json"
                        }
                     }).then(Response => {
                        return Response.json();
                     })
                  }

                  sendRequest('GET', requestURL)
                     .then(Date => {

                        this.prod_salesCheck = Date.salesCheck; // Покупок ви зробили у COMFY

                        if (Date.salesCheck !== 0) {
                           let prod_lifetime_ = Date.lifetime;
                           let prod_topCategories = Date.topCategories; // TOP категории
                           let topCategories_replace = prod_topCategories.replace(/\s*,\s*/g, ',');
                           let topCategories_mass = topCategories_replace.split(',');
                           this.prod_topCategories_1 = topCategories_mass[0];
                           this.prod_topCategories_2 = topCategories_mass.slice(1, -1).join(', ');
                           this.prod_topCategories_3 = topCategories_mass[topCategories_mass.length - 1];
                           let prod_segmentNumber = Date.segmentNumber; // Сегмент 5% 35% 55%
                           let prod_visits = Date.visits; // Завітали до інтернет-магазину COMFY цього року
                           let prod_bonusCharge = Date.bonusCharge; // За це ми нарахували вам от стільки COMFY-бонусів

                           if (prod_segmentNumber === 1) {
                              this.segmentNumber = 5;
                           } else if (prod_segmentNumber === 2) {
                              this.segmentNumber = 35;
                           } else if (prod_segmentNumber === 3) {
                              this.segmentNumber = 55;
                           }

                        } else {
                           this.prod_salesCheck = 0;
                        }

                     });

               }
            }
         });
      });
   </script>
</body>

</html>