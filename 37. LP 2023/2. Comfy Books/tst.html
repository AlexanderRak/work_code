<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
</head>

<body>

   <style>
      .wraper {
         display: block;
         max-width: 1160px;
         padding: 0 12px;
         margin: 0 auto;
      }

      .content-books__grid {
         display: grid;
         grid-template-columns: 1fr 1fr;
         grid-gap: 20px;
      }

      .hide-overflow {
         overflow: hidden;
         text-overflow: ellipsis;
         display: -webkit-box;
         -webkit-line-clamp: 5;
         /* Установите здесь желаемое количество строк */
         -webkit-box-orient: vertical;
      }

      .show-more-button {
         background: none;
         border: none;
         color: blue;
         cursor: pointer;
         display: block;
         margin-top: 0.5em;
      }

      .content-books__item-right {
         position: relative;
      }
   </style>

   <div class="wraper">
      <div class="content-books__grid">

      </div>
   </div>

   <script>

      const responseMock = {
         "books": [
            {
               "id": 1,
               "description": "В цій книжці ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наших читачів. Готуйте із задоволенням!",
            },
            {
               "id": 2,
               "description": "В цій книжці ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили  ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наш  ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наш наших читачів. Готуйте із задоволенням!В цій книжці ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наших читачів. Готуйте із задоволенням!В цій книжці ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наших читачів. Готуйте із задоволенням!В цій книжці ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наших читачів. Готуйте із задоволенням!",
            },
            {
               "id": 3,
               "description": "В цій книжці ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили огу COMFY, які найбільше зацікавили  ми зібрали найпопулярніші рецепти блогуогу COMFY, які найбільше зацікавили  ми зібрали найпопулярніші рецепти блогуогу COMFY, які найбільше зацікавили  ми зібрали найпопулярніші рецепти блогуогу COMFY, які найбільше зацікавили  ми зібрали найпопулярніші рецепти блогу ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наш  ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наш наших читачів. Готуйте із задоволенням!В цій книжці ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наших читачів. Готуйте із задоволенням!В цій книжці ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наших читачів. Готуйте із задоволенням!В цій книжці ми зібрали найпопулярніші рецепти блогу COMFY, які найбільше зацікавили наших читачів. Готуйте із задоволенням!",
            }
         ]
      }

      let massresolt = [];

      function pushBlockBook1(responseMock) {
         const massAll = responseMock.books;

         for (let i = 0; i < 10; i++) {
            massresolt.push(massAll[i % massAll.length]);
         }
      }

      function pushBlockBook2(mass) {
         for (const key in mass) {
            let row = document.createElement('div');
            row.classList.add('content-books__grid__item');
            row.setAttribute("data-num", `${key}`);
            row.innerHTML = `
               <div class="content-books__item-right">
                  <div class="content-books__item-right-description">${mass[key].description}</div>
               </div>
               `;
            document.querySelector('.content-books__grid').appendChild(row);
         }
      }

      function pushBlockBook3() {

         function truncateText(element, maxLength) {
            var text = element.innerHTML;

            if (text.length > maxLength) {
               var truncatedText = text.substr(0, maxLength) + "...";
               var hiddenText = text.substr(maxLength);

               element.innerHTML = truncatedText;

               var showMoreButton = document.createElement("button");
               showMoreButton.innerHTML = "Показать еще";

               showMoreButton.addEventListener("click", function () {
                  if (element.innerHTML === truncatedText) {
                     element.innerHTML = truncatedText + hiddenText;
                     showMoreButton.innerHTML = "Показать меньше";
                  } else {
                     element.innerHTML = truncatedText;
                     showMoreButton.innerHTML = "Показать еще";
                  }
               });

               element.parentNode.appendChild(showMoreButton);
            }
         }

         var elements = document.querySelectorAll(".content-books__item-right-description");
         var maxLength = 300;

         elements.forEach(function (element) {
            truncateText(element, maxLength);
         });

      }


      pushBlockBook1(responseMock);
      pushBlockBook2(massresolt);
      pushBlockBook3();

   </script>
</body>

</html>