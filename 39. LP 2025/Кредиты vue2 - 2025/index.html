<!DOCTYPE html>
<html lang="uk">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Вкладки Vue 2</title>
   <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
   <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
   <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
   <link rel="stylesheet" href="crediting-style.css">
   </style>
</head>
<body>
   <div id="crediting-page" v-cloak>
      <div class="crediting-page__container">
         <div class="crediting-page__header">
            <div class="crediting-page__header-item">
               <div class="crediting-page__header-h1">
                  <h1>Кредит та оплата частинами</h1>
               </div>
               <div class="crediting-page__header-h2">
                  <h4>Бери зараз, фіксуй ціну, сплачуй комфортно</h4>
               </div>
            </div>
            <div class="crediting-page__header-item">
               <div class="crediting-page__header-btn-video-consultation">
                  <span>Отримати відеоконсультацію</span>
               </div>
            </div>
         </div>

         <div class="crediting-page__tabs-upper">
            <ul class="crediting-page__tabs-upper-list">
               <li
                  v-for="tab in tabs"
                  :key="tab.id"
                  @click="selectTab(tab.id)"
                  role="tab"
                  :aria-selected="activeTab === tab.id"
                  class="crediting-page__tabs-upper-item"
                  :class="{ active: activeTab === tab.id }"
               >
                  {{ tab.name }}
               </li>
            </ul>
         </div>

         <div
            v-if="activeTabData.advantages && activeTabData.advantages.length"
            class="crediting-page__advantages"
         >
            <div class="crediting-page__advantages-h3">
               <h3>Переваги:</h3>
            </div>
            <ul
               class="crediting-page__advantages-list"
               :class="{ row5: activeTab === 'kredit' }"
            >
               <li
                  v-for="(advantage, index) in activeTabData.advantages"
                  :key="index"
                  class="crediting-page__advantages-list-item"
               >
                  <img
                     v-if="advantage.image"
                     :src="`img/${advantage.image}`"
                     :alt="advantage.title"
                  >
                  <div class="crediting-page__advantages-h4">
                     <h4>{{ advantage.title }}</h4>
                  </div>
                  <div class="crediting-page__advantages-p">
                     <p>{{ advantage.description }}</p>
                  </div>
               </li>
            </ul>
         </div>

         <div
            v-for="tab in tabs"
            :key="tab.id"
            v-show="activeTab === tab.id"
            class="crediting-page__tab-wrapper"
         >

            <div v-if="tab.id === 'zagalna-іnformacіja' && !isMobile" class="crediting-page__banks-table-wrap">
               <div class="crediting-page__banks-table-header">
                  <div class="crediting-page__credit-offers__h2">
                     <h2>Порівняння кредитних пропозицій</h2>
                  </div>
                  <div class="crediting-page__dropdown">
                     <div class="crediting-page__dropdown-btn" @click="toggleDropdown">
                        {{ activeFilterName }}
                     </div>
                     <ul class="crediting-page__dropdown-content" :class="{ open: isDropdownOpen && isMobile }">
                        <li @click="setFilter('popularity')" :class="{ active: currentFilter === 'popularity' }">
                           За популярністю
                        </li>
                        <li @click="setFilter('termDesc')" :class="{ active: currentFilter === 'termDesc' }">
                           За кількістю платежів (від найбільшої)
                        </li>
                        <li @click="setFilter('termAsc')" :class="{ active: currentFilter === 'termAsc' }">
                           За кількістю платежів (від найменшої)
                        </li>
                        <li @click="setFilter('commissionAsc')" :class="{ active: currentFilter === 'commissionAsc' }">
                           За комісією (від найменшої)
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="crediting-page__banks-table-cont">
                  <table class="crediting-page__banks-table">
                     <thead>
                        <tr class="crediting-page__banks-tr-first">
                           <th>Банк</th>
                           <th>Перший внесок</th>
                           <th>Строк кредитування</th>
                           <th>Щомісячна комісія</th>
                           <th>Мінімальна сума покупки</th>
                           <th>Максимальна сума покупки</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr v-for="bank in sortedBanks" :key="bank.id">
                           <td>
                              <img
                                 :src="'img/' + bank.images"
                                 :alt="bank.name"
                              >
                              {{ bank.name }}
                           </td>
                           <td>
                              <img
                                 v-if="bank.firstPayment == 0"
                                 :src="'img/tada_null_icon.png'"
                                 alt=""
                              >
                              <div v-else v-html="bank.firstPayment"></div>
                           </td>
                           <td v-html="bank.creditTerm"></td>
                           <td>
                              <img
                                 v-if="bank.monthlyCommission == 0"
                                 :src="'img/tada_null_icon.png'"
                                 alt=""
                              >
                              <div v-else v-html="bank.monthlyCommission"></div>
                           </td>
                           <td v-html="bank.minPurchase"></td>
                           <td>
                              <img
                                 v-if="bank.maxPurchase == 0"
                                 :src="'img/tada_null_icon.png'"
                                 alt=""
                              >
                              <div v-else v-html="bank.maxPurchase"></div>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>

            <component :is="tab.component"></component>

            <div v-if="tab.id === 'zagalna-іnformacіja' && isMobile" class="crediting-page__banks-table-mobile">
               <div class="crediting-page__banks-table-header">
                  <div class="crediting-page__credit-offers__h2">
                     <h2>Порівняння кредитних пропозицій</h2>
                  </div>
                  <div class="crediting-page__dropdown">
                     <div class="crediting-page__dropdown-btn" @click="toggleDropdown"></div>
                     <ul class="crediting-page__dropdown-content" :class="{ open: isDropdownOpen }">
                        <li @click="setFilter('popularity')" :class="{ active: currentFilter === 'popularity' }">
                           За популярністю
                        </li>
                        <li @click="setFilter('termDesc')" :class="{ active: currentFilter === 'termDesc' }">
                           За кількістю платежів (від найбільшої)
                        </li>
                        <li @click="setFilter('termAsc')" :class="{ active: currentFilter === 'termAsc' }">
                           За кількістю платежів (від найменшої)
                        </li>
                        <li @click="setFilter('commissionAsc')" :class="{ active: currentFilter === 'commissionAsc' }">
                           За комісією (від найменшої)
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="crediting-page__swiper-wrap">
                  <button class="swiper-button-custom-prev"></button>
                  <button class="swiper-button-custom-next"></button>
                  <div class="swiper mySwiper">
                     <div class="swiper-wrapper">
                        <div class="swiper-slide" v-for="bank in sortedBanks" :key="bank.id">
                           <div class="crediting-page__slide-content">
                              <table class="crediting-page__banks-table">
                                 <thead>
                                    <tr class="crediting-page__banks-tr-mob">
                                       <th>
                                          <img
                                             :src="'img/' + bank.images"
                                             :alt="bank.name"
                                          >
                                          {{ bank.name }}
                                       </th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr>
                                       <td>Перший внесок</td>
                                       <td>
                                          <img v-if="bank.firstPayment == 0" :src="'img/tada_null_icon.png'" alt="">
                                          <div v-else v-html="bank.firstPayment"></div>
                                       </td>
                                    </tr>
                                    <tr>
                                       <td>Строк кредитування</td>
                                       <td>
                                          <img v-if="bank.creditTerm == 0" :src="'img/tada_null_icon.png'" alt="">
                                          <div v-else v-html="bank.creditTerm"></div>
                                       </td>
                                    </tr>
                                    <tr>
                                       <td>Щомісячна комісія</td>
                                       <td>
                                          <img v-if="bank.monthlyCommission == 0" :src="'img/tada_null_icon.png'" alt="">
                                          <div v-else v-html="bank.monthlyCommission"></div>
                                       </td>
                                    </tr>
                                    <tr>
                                       <td>Мінімальна сума покупки</td>
                                       <td>
                                          <img v-if="bank.minPurchase == 0" :src="'img/tada_null_icon.png'" alt="">
                                          <div v-else v-html="bank.minPurchase"></div>
                                       </td>
                                    </tr>
                                    <tr>
                                       <td>Максимальна сума покупки</td>
                                       <td>
                                          <img v-if="bank.maxPurchase == 0" :src="'img/tada_null_icon.png'" alt="">
                                          <div v-else v-html="bank.maxPurchase"></div>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>

            <div class="crediting-page__tabs-grid">
               <div v-if="tab.subTabs" class="crediting-page__subTabs">
                  <div
                     v-for="subTab in tab.subTabs"
                     :key="subTab.id"
                     @click="isMobile ? openModal() : selectSubTab(tab.id, subTab.id)"
                     :class="{ active: activeSubTab === subTab.id }"
                     class="crediting-page__subTabs-item"
                  >
                     <div class="crediting-page__subTabs-h2">
                        <h2>{{ subTab.name }}</h2>
                     </div>
                     <div v-if="subTab.logo" class="crediting-page__subTabs-logo">
                        <img :src="subTab.logo" alt="">
                     </div>
                  </div>
               </div>

               <div v-if="isMobile" class="modal" :class="{ open: isModalOpen }">
                  <div class="modal-content">
                     <div class="modal-btn">
                        <div class="modal-close" @click="closeModal">
                           <img src="img/close.svg" alt="">
                           Закрити
                        </div>
                     </div>
                     <ul class="modal-subtabs-list">
                        <li
                           v-for="subTab in activeTabData.subTabs"
                           :key="subTab.id"
                           @click="selectSubTab(activeTab, subTab.id)"
                           class="modal-subtabs-item"
                           :class="{ active: activeSubTab === subTab.id }"
                        >
                           <div class="crediting-page__subTabs-h2">
                              <h2>{{ subTab.name }}</h2>
                           </div>
                           <div v-if="subTab.logo" class="crediting-page__subTabs-logo">
                              <img :src="subTab.logo" alt="">
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>

               <div
                  v-for="subTab in tab.subTabs"
                  :key="subTab.id"
                  v-show="activeSubTab === subTab.id"
                  class="crediting-page__subTabs-content"
               >
                  <component :is="subTab.component"></component>

                  <div
                     v-if="subTab.popularQuestions && subTab.popularQuestions.length"
                     class="crediting-page__popular-questions"
                  >
                     <div class="crediting-page__popular-questions-h2">
                        <h2>Популярні питання</h2>
                     </div>
                     <div class="crediting-page__popular-questions-list">
                        <div
                           v-for="(question, index) in subTab.popularQuestions"
                           :key="index"
                           class="crediting-page__popular-questions-list-item"
                        >
                           <div
                              class="crediting-page__popular-questions-grid"
                              :class="{ questions_active: isSubTabExpanded(index) }"
                              @click="toggleSubTabQuestion(index)"
                           >
                              <div class="crediting-page__popular-questions-title">
                                 {{ question.title }}
                              </div>
                              <div
                                 class="crediting-page__popular-questions-toggle"
                                 :class="{ questions_active: isSubTabExpanded(index) }"
                              ></div>
                           </div>
                           <div
                              class="crediting-page__popular-questions-content"
                              v-show="isSubTabExpanded(index)"
                              v-html="question.description"
                           ></div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>

            <div
               v-if="activeTabData.popularQuestions && activeTabData.popularQuestions.length"
               class="crediting-page__popular-questions"
            >
               <div class="crediting-page__popular-questions-h2">
                  <h2>Популярні питання</h2>
               </div>
               <div class="crediting-page__popular-questions-list">
                  <div
                     v-for="(question, index) in activeTabData.popularQuestions"
                     :key="index"
                     class="crediting-page__popular-questions-list-item"
                  >
                     <div
                        class="crediting-page__popular-questions-grid"
                        :class="{ questions_active: isExpanded(index) }"
                        @click="toggleQuestion(index)"
                     >
                        <div class="crediting-page__popular-questions-title">
                           {{ question.title }}
                        </div>
                        <span
                           class="crediting-page__popular-questions-toggle"
                           :class="{ questions_active: isExpanded(index) }"
                        ></span>
                     </div>
                     <div
                        class="crediting-page__popular-questions-content"
                        v-show="isExpanded(index)"
                        v-html="question.description"
                     ></div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>

   <script>
      Vue.component('tab-zagalna-informacija', {
         template: `
            <div class="crediting-page__credit-offers">
               <div class="crediting-page__reviews">

               </div>
            </div>
         `
      });
      Vue.component('subtab-privat-bank', {
         template: `
            <div class="crediting-page__tabs-content">
               <div class="crediting-page__conditions-wrap">
                  <div class="crediting-page__conditions-container">
                     <div class="crediting-page__conditions-h3">
                        <h3>Условия:</h3>
                     </div>
                     <div class="crediting-page__conditions-grid__wrap">

                        <div class="crediting-page__conditions-grid">
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-left">
                                 <p>Рассмотрение заявки</p>
                              </div>
                           </div>
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-right">
                                 <p class="color-green">от 15 минут</p>
                              </div>
                           </div>
                        </div>
                        <div class="crediting-page__conditions-grid">
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-left">
                                 <p>Срок кредитования</p>
                              </div>
                           </div>
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-right">
                                 <p class="color-green">до 15 платежей</p>
                              </div>
                           </div>
                        </div>
                        <div class="crediting-page__conditions-grid">
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-left">
                                 <p>Льготный период</p>
                              </div>
                           </div>
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-right">
                                 <p class="color-green">2,4,6,9,11,14,18,20 месяцев</p>
                              </div>
                           </div>
                        </div>
                        <div class="crediting-page__conditions-grid">
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-left">
                                 <p>Авансовый взнос</p>
                              </div>
                           </div>
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-right">
                                 <p class="color-green">от 0% от стоимости товара</p>
                              </div>
                           </div>
                        </div>
                        <div class="crediting-page__conditions-grid">
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-left">
                                 <p>Разовая комиссия</p>
                              </div>
                           </div>
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-right">
                                 <p class="color-green">от 0% до 2,5% в зависимости от банка</p>
                              </div>
                           </div>
                        </div>
                        <div class="crediting-page__conditions-grid">
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-left">
                                 <p>Ежемесячная комиссия</p>
                              </div>
                           </div>
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-right">
                                 <p class="color-green">3% - 5,5% от стоимости товара по истечении льготного периода в зависимости от банка</p>
                              </div>
                           </div>
                        </div>
                        <div class="crediting-page__conditions-grid">
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-left">
                                 <p>Процентная ставка</p>
                              </div>
                           </div>
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-right">
                                 <p class="color-green">0,01% годовых - АТ «ОТП Банк», АТ «ПУМБ», АТ «Sense Bank», АТ «БАНК АЛЬЯНС»<br>0,00001% годовых - АТ «УКРСИББАНК», АТ "КБ"ГЛОБУС"<br>АТ «ОКСІ БАНК»</p>
                              </div>
                           </div>
                        </div>
                        <div class="crediting-page__conditions-grid">
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-left">
                                 <p>Страховой тариф</p>
                              </div>
                           </div>
                           <div class="crediting-page__conditions-item">
                              <div class="crediting-page__conditions-text-right">
                                 <p class="color-green">0%</p>
                              </div>
                           </div>
                        </div>
                        <div class="crediting-page__conditions-grid"></div>

                     </div>
                     <div class="crediting-page__conditions-text">
                        <br>
                        <p>- АТ «ПУМБ» - Детальнее по условиям кредита <a href="https://www.pumb.ua/credit/loan_products" rel="nofollow" target="_blank" class="link-credit">на сайте Банка</a></p>
                        <p>- АТ «Sense Bank» - Детальнее по условиям кредита <a href="https://sensebank.ua/internet-kredituvanna" rel="nofollow" target="_blank" class="link-credit">на сайте Банка</a></p>
                        <p>- АТ "КБ"ГЛОБУС" - Детальнее по условиям кредита <a href="http://globusplus.ua" rel="nofollow" target="_blank" class="link-credit">на сайте Банка</a></p>
                     </div>
                  </div>
               </div>
               <div class="crediting-page__bayprod-wrap">
                  <div class="crediting-page__bayprod-container">

                     <div class="crediting-page__bayprod-h3">
                        <h3>Как купить товар в <span class="word-wrap-mob">«Кредит 0,01%»</span></h3>
                     </div>

                     <div class="crediting-page__bayprod-grid__wrap">
                        <div class="crediting-page__bayprod-grid">
                           <div class="crediting-page__bayprod-item">
                              <div class="crediting-page__bayprod-text-left">
                                 <div class="crediting-page__bayprod-num">01</div>
                                 <h4>Выбираете товар</h4>
                                 <p>На сайте или в мобильном приложении COMFY</p>
                              </div>
                           </div>
                           <div class="crediting-page__bayprod-item">
                              <div class="crediting-page__bayprod-img-right">
                                 <img src="https://cdn.comfy.ua/media/x/img2/creditpage/kredit01_img12.png" alt="">
                              </div>
                           </div>
                        </div>

                        <div class="crediting-page__bayprod-grid">
                           <div class="crediting-page__bayprod-item">
                              <div class="crediting-page__bayprod-text-left">
                                 <div class="crediting-page__bayprod-num">02</div>
                                 <h4>Оформляете заказ</h4>
                                 <p>Нажмите <b class="bold-b__bayprod">«Кредит 0,01%»</b> привыборе способа оплаты</p>
                              </div>
                           </div>
                           <div class="crediting-page__bayprod-item">
                              <div class="crediting-page__bayprod-img-right">
                                 <img src="https://cdn.comfy.ua/media/x/img2/creditpage/kredit01_img13.png" alt="">
                              </div>
                           </div>
                        </div>

                        <div class="crediting-page__bayprod-grid">
                           <div class="crediting-page__bayprod-item">
                              <div class="crediting-page__bayprod-text-left">
                                 <div class="crediting-page__bayprod-num">03</div>
                                 <h4>Выбираете количество платежей</h4>
                                 <p>Укажите удобное вам количество месяцев кредита</p>
                              </div>
                           </div>
                           <div class="crediting-page__bayprod-item">
                              <div class="crediting-page__bayprod-img-right">
                                 <img src="https://cdn.comfy.ua/media/x/img2/img_step_03.png" alt="">
                              </div>
                           </div>
                        </div>

                        <div class="crediting-page__bayprod-grid">
                           <div class="crediting-page__bayprod-item">
                              <div class="crediting-page__bayprod-text-left">
                                 <div class="crediting-page__bayprod-num">04</div>
                                 <h4>Завершаете покупку</h4>
                                 <p>Ожидайте подтверждения заказа</p>
                              </div>
                           </div>
                           <div class="crediting-page__bayprod-item">
                              <div class="crediting-page__bayprod-img-right">
                                 <img src="https://cdn.comfy.ua/media/x/img2/creditpage/kredit01_img15.png" alt="">
                              </div>
                           </div>
                        </div>
                     </div>

                     <div class="crediting-page__bayprod-grid3clmn">
                        <div class="crediting-page__bayprod-grid3clmn_item">
                           <img src="https://cdn.comfy.ua/media/x/img2/creditpage/kredit01_img19.svg" alt="">
                           <div class="crediting-page__bayprod-grid3clmn-p">
                              <p>Сотрудник контакт-центра в момент подтверждения заказа запрашивает у вас недостающие данные и отправляет заявку в несколько банков.</p>
                           </div>
                        </div>
                        <div class="crediting-page__bayprod-grid3clmn_item">
                           <img src="https://cdn.comfy.ua/media/x/img2/creditpage/kredit01_img17.svg" alt="">
                           <div class="crediting-page__bayprod-grid3clmn-p">
                              <p>От 1 мин. банки предоставляют решения по заявке и вы можете выбрать лучшее кредитное предложение. Срок кредита в разных банках может отличаться.</p>
                           </div>
                        </div>
                        <div class="crediting-page__bayprod-grid3clmn_item">
                           <img src="https://cdn.comfy.ua/media/x/img2/creditpage/kredit01_img18.svg" alt="">
                           <div class="crediting-page__bayprod-grid3clmn-p">
                              <p>Приходите в магазин с оригиналами паспорта и ИНН, подписываете кредитный договор и забираете товар.</p>
                           </div>
                        </div>
                     </div>

                  </div>
               </div>
            </div>
         `
      });
      Vue.component('subtab-pumb-bank', { template: '<div><h2 style="color: red; padding-top: 20px;">pumb</h2><p>Детальна інформація про кредитування в pumb...</p></div>' });
      Vue.component('subtab-mono-bank', { template: '<div><h2 style="color: red; padding-top: 20px;">Mono</h2><p>Детальна інформація про кредитування в Mono...</p></div>' });
      Vue.component('subtab-a-bank', { template: '<div><h2 style="color: red; padding-top: 20px;">a-bank</h2><p>Детальна інформація про кредитування в a-bank...</p></div>' });
      Vue.component('subtab-ukrsib-bank', { template: '<div><h2 style="color: red; padding-top: 20px;">ukrsib</h2><p>Детальна інформація про кредитування в ukrsib...</p></div>' });
      Vue.component('subtab-globus-bank', { template: '<div><h2 style="color: red; padding-top: 20px;">globus</h2><p>Детальна інформація про кредитування в globus...</p></div>' });
      Vue.component('subtab-sens-bank', { template: '<div><h2 style="color: red; padding-top: 20px;">sens</h2><p>Детальна інформація про кредитування в sens...</p></div>' });
      Vue.component('subtab-otp-bank', { template: '<div><h2 style="color: red; padding-top: 20px;">otp</h2><p>Детальна інформація про кредитування в otp...</p></div>' });
      Vue.component('subtab-suchasnij-factoring', { template: '<div><h2 style="color: red; padding-top: 20px;">suchasnij-factoring</h2><p>Детальна інформація про кредитування в suchasnij-factoring...</p></div>' });
      Vue.component('subtab-novapaynew', { template: '<div><h2 style="color: red; padding-top: 20px;">novapaynew</h2><p>Детальна інформація про кредитування в novapaynew...</p></div>' });
      Vue.component('subtab-zagalna-informacija', { template: '<div><h2 style="color: red; padding-top: 20px;">Загальна інформація</h2><p>Детальна інформація про кредитування в Загальна інформація...</p></div>' });
      Vue.component('tab-kredit', { template: '<div><h2 style="color: red; padding-top: 20px;">Кредит</h2><p>Умови кредитування...</p></div>' });
      Vue.component('tab-credit-calculator', { template: '<div><h2 style="color: red; padding-top: 20px;">Розрахуй свій кредит</h2><p>Інструмент для розрахунку кредиту...</p></div>' });

      new Vue({
         el: "#crediting-page",
         data: {
            tabs: [
               {
                  id: "zagalna-іnformacіja",
                  name: "Загальна інформація",
                  component: "tab-zagalna-informacija",
                  advantages: [
                     {
                        title: "Просто",
                        image: "icon1.svg",
                        description: "Оформити покупку можна тут і зараз! Обирайте товар та оформлюйте найзручнішу кредитну пропозицію через мобільний додаток COMFY або на сайті. Жодних черг та витрат на дорогу!", 
                     },
                     {
                        title: "Зручно",
                        image: "icon2.svg",
                        description: "Сплачуйте кредит там, де зручно: у відділенні, терміналі чи смартфоні. Обирайте той спосіб, який підходить саме вам, і керуйте оплатами легко. Все просто і доступно, без зайвих кроків чи складнощів.",
                     },
                     {
                        title: "Можна достроково",
                        image: "icon3.svg",
                        description: "Робіть щомісячні платежі або погасіть кредит достроково, якщо маєте таку можливість. Здійснити дострокову виплату можна за допомогою онлайн оплати чи звернувшись до служби підтримки банку. Ви обираєте, як і коли завершити оплату.",
                     },
                     {
                        title: "Доступно",
                        image: "icon4.svg",
                        description: "Кожен товар у COMFY доступний в кредит. Оберіть найзручніші умови та оптимальну кількість місяців для погашення — від 3 щомісячних платежів і більше. Купуйте зараз, а платіть поступово!",
                     }
                  ],
                  popularQuestions: [
                     {
                        title: "Чи можливо оформити кредит без оригіналів документів через ДІЯ?",
                        description: "Ні, оформлення паперового кредиту без оригіналів документів неможливе.<br>Навіть якщо дані є в Дії, клієнт повинен мати при собі оригінал паспорта та ідентифікаційного коду. Це обов’язкова вимога банку. Виключення при Електронному підписанні документів."
                     },
                     {
                        title: "Чи можливо провести електронне підписання кредиту?",
                        description: "Електронне підписання кредиту дозволяє оформити кредит від ОТР, «Глобус» або UKRSIBBANK, не виходячи з дому для клієнтів, які купують товари із доставленням до магазину (в самовивіз).<br>Послуга надається на розсуд банку і якщо для вас така можливість присутня — кредитний фахівець запропонує вам нею скористатись."
                     },
                     {
                        title: "Як отримати замовлення, оформлене в кредит, та чи може це зробити інша людина?",
                        description: "Отримати замовлення в кредит можна тільки в магазині, пред’явивши оригінали документів. Після підписання документів, у разі необхідності, ви зможете оформити доставку. Замовлення може отримати тільки особа, на яку оформлено кредит."
                     },
                     {
                        title: "Які документи потрібні для оформлення кредиту?",
                        description: `
                        Для оформлення кредиту необхідно мати оригінали таких документів:
                        1. Паспорт громадянина України:
                        - Паспорт-книжка – обов'язково повинні бути вклеєні фото в 25 та 45 років та оригінал ІПН.
                        - ID-картка – витяг про прописку (згенерований в додатку "Дія" або оригінал).
                        2. Ідентифікаційний номер (ІПН) – оригінал.
                        `
                     },
                     {
                        title: "В якому віці можливо оформити кредит?",
                        description: "Залежно від умов конкретного банку, вік особи може бути від 18 до 70 років."
                     },
                     {
                        title: "За яких умов ми не зможемо подати заявку на кредит?",
                        description: `
                        <ul>
                           <li>Якщо ви є громадянином іншої країни та маєте довідку про постійне місце проживання в Україні.</li>
                           <li>Якщо ви не маєте прописки.</li>
                           <li>Якщо у вас інвалідність І групи.</li>
                           <li>Якщо ви перебуваєте в декретній відпустці або на лікарняному перед пологами та отримуєте дохід тільки у вигляді цільової допомоги.</li>
                        </ul>
                        `
                     },
                     {
                        title: "Чи можна оформити кредит без офіційного працевлаштування?",
                        description: "Банки розглядають заявки не лише від офіційно працевлаштованих клієнтів, а й від тих, хто не має офіційного працевлаштування, проте працював на останньому місці роботи не менше 3 місяців.<br>Якщо ви займаєтесь підприємницькою діяльністю, вона повинна бути офіційно зареєстрована."
                     },
                     {
                        title: "Чи стягується комісія за дострокове погашення?",
                        description: "Плата за дострокове погашення НЕ стягується;"
                     },
                     {
                        title: "Чи є приховані платежі?",
                        description: "Ні."
                     },
                     {
                        title: "Які вимоги до кредитної історії?",
                        description: "Кожний банк регулюється внутрішніми нормативними документами згідно політики ризиків. Для кожного банку ці вимоги можуть бути індивідуальним - банки про них нікому не надають інформацію;"
                     },
                  ]
               },
               {
                  id: "oplata-chastjami",
                  name: "Оплата частинами",
                  component: "",
                  advantages: [
                     {
                        title: "Просто",
                        image: "icon1.svg",
                        description: "Оформити покупку можна тут і зараз! Обирайте товар та оформлюйте найзручнішу кредитну пропозицію через мобільний додаток COMFY або на сайті нашого інтернет-магазину. Жодних черг та витрат на дорогу!",
                     },
                     {
                        title: "Зручно",
                        image: "icon2.svg",
                        description: "Щомісячний платіж списується з вашої карти автоматично. Внести кошти на карту можна у відділенні банку, через найближчий термінал самообслуговування або застосунок банку на вашому смартфоні.",
                     },
                     {
                        title: "Щомісячно чи достроково",
                        image: "icon3.svg",
                        description: "Робіть щомісячні платежі або погасіть кредит достроково, якщо маєте таку можливість. Здійснити дострокову виплату можна за допомогою онлайн оплати чи звернувшись до служби підтримки банку. Ви обираєте, як і коли завершити оплату.",  
                     },
                     {
                        title: "Самостійно",
                        image: "icon5.svg",
                        description: "Контролюйте свої витрати по кредиту самостійно у відповідному розділі інтернет-банкінгу.",
                     }
                  ],
                  subTabs: [
                     { id: "privat-bank", name: "Оплата частинами", logo: 'https://cdn.comfy.ua/media/x/img2/creditpage/kredit_img2.svg', component: 'subtab-privat-bank' },
                     { id: "pumb-bank", name: "Сплачуйте частинами", logo: 'https://cdn.comfy.ua/media/x/img5/pumb.svg', component: 'subtab-pumb-bank' },
                     { id: "mono-bank", name: "Покупка частинами", logo: 'https://cdn.comfy.ua/media/x/img2/creditpage/kredit_img3.svg', component: 'subtab-mono-bank' },
                     { id: "a-bank", name: "Плати частинами", logo: 'https://cdn.comfy.ua/media/x/img5/abank.svg', component: 'subtab-a-bank' },
                     { id: "ukrsib-bank", name: "Плати частинами", logo: 'https://cdn.comfy.ua/media/x/img3/ukrsib_bank.svg', component: 'subtab-ukrsib-bank' },
                     { id: "globus-bank", name: "Плати частинами", logo: 'https://cdn.comfy.ua/media/x/img3/globus_bank.svg', component: 'subtab-globus-bank' },
                     { id: "sens-bank", name: "Плата частинами", logo: 'https://cdn.comfy.ua/media/x/img5/sensbank1logo.svg', component: 'subtab-sens-bank' },
                     { id: "otp-bank", name: "Плата частинами", logo: 'https://cdn.comfy.ua/media/x/img2/otpbank.png', component: 'subtab-otp-bank' },
                     { id: "suchasnij-factoring", name: "Сучасний Факторинг", logo: 'https://cdn.comfy.ua/media/x/img4/icon_factoring.png', component: 'subtab-suchasnij-factoring' },
                     { id: "novapaynew", name: "Посилка в кредит", logo: 'https://cdn.comfy.ua/media/x/img5/novapaynew.svg', component: 'subtab-novapaynew' },
                     { id: "zagalna-informacija", name: "Загальна інформація", logo: "", component: 'subtab-zagalna-informacija' }
                  ]
               },
               {
                  id: "kredit",
                  name: "Кредит",
                  component: "tab-kredit",
                  advantages: [
                     {
                        title: "Просто",
                        image: "icon1.svg",
                        description: "Оформити покупку можна тут і зараз! Обирайте товар та оформлюйте найзручнішу кредитну пропозицію через мобільний додаток COMFY або на сайті нашого інтернет-магазину. Жодних черг та витрат на дорогу!",
                     },
                     {
                        title: "Зручно",
                        image: "icon2.svg",
                        description: "Зручність кредиту — у першому внеску, який зменшує основний платіж. За бажанням ви можете внести навіть половину суми, а решту розбити на рівні щомісячні платежі. Оплата доступна через термінали чи у відділенні банку за реквізитами з договору.",
                     },
                     {
                        title: "Щомісячно чи достроково",
                        image: "icon3.svg",
                        description: "Робіть щомісячні платежі або погасіть кредит достроково, якщо маєте таку можливість. Здійснити дострокову оплату можна, звернувшись до служби підтримки банку або безпосередньо у відділенні. Ви обираєте, як і коли завершити оплату.", 
                     },
                     {
                        title: "До 250 000 грн",
                        image: "icon6.svg",
                        description: "Максимальну суму кредиту збільшено до 250 000 грн. Ваші мрії мають здійснюватися! (АТ «БАНК АЛЬЯНС» - 250 000грн, АТ «ОТП Банк» - 200 000грн, АТ «Sense Bank» - 150 000грн, АТ «ПУМБ» - 200 000грн, АТ «УКРСИББАНК» - 150 000грн, «АТ КБ ГЛОБУС» – 100 000грн, АТ «ОКСІ БАНК» - 100 000грн).",
                     },
                     {
                        title: "Після пільгового періоду - 3%",
                        image: "icon7.svg",
                        description: "Після закінчення пільгового періоду додається відсоток щомісячної комісії від суми кредиту (в АТ «Sense Bank» - 3%, АТ «ОТП Банк» - 3%, АТ «ПУМБ» - 3%-3,5%, АТ «УКРСИББАНК» - 3%-3,5%, «АТ КБ ГЛОБУС» – 3%, АТ «ОКСІ БАНК» - 3,5%, АТ «БАНК АЛЬЯНС» - 3,5%-5,5%).",
                     }
                  ],
                  popularQuestions: [
                     { title: "Юридична інформація", description: "Це великий блок інформації для <strong>Юридична інформація</strong>." }
                  ]
               },
               {
                  id: "credit-calculator",
                  name: "Розрахуй свій кредит",
                  component: "tab-credit-calculator"
               }
            ],
            "banks": [
               {
                  "id": "privat",
                  "name": "Оплата частинами",
                  "firstPayment": 0,
                  "creditTerm": "до 24 платежів",
                  "monthlyCommission": "<b>0,01%</b> на місяць від початкової вартості товару",
                  "minPurchase": "300 ₴",
                  "maxPurchase": "За популярністю",
                  "rating_popular": 1,
                  "rating_payments_max_min": 3,
                  "rating_payments_min_max": 9,
                  "rating_commission": 1,
                  "images": "1privat.png"
               },
               {
                  "id": "pumb",
                  "name": "Сплачуйте частинами",
                  "firstPayment": "можливий за бажанням клієнта",
                  "creditTerm": "до 24 платежів",
                  "monthlyCommission": "<b>0,00001%</b> на місяць від початкової вартості товару",
                  "minPurchase": "500 ₴",
                  "maxPurchase": "200 000 ₴",
                  "rating_popular": 2,
                  "rating_payments_max_min": 8,
                  "rating_payments_min_max": 4,
                  "rating_commission": 8,
                  "images": "2pumb.png"
               },
               {
                  "id": "mono",
                  "name": "Покупка частинами",
                  "firstPayment": "можливий за бажанням клієнта<br><b>Важливо</b>! (У момент оформлення «Покупки частинами» також зніметься перший платіж з картки)",
                  "creditTerm": "до 20 платежів",
                  "monthlyCommission": "<b>0,00001%</b> річних від початкової вартості товару",
                  "minPurchase": "500 ₴",
                  "maxPurchase": "Згідно з вашим лімітом",
                  "rating_popular": 3,
                  "rating_payments_max_min": 6,
                  "rating_payments_min_max": 6,
                  "rating_commission": 6,
                  "images": "3mono.png"
               },
               {
                  "id": "abank",
                  "name": "Плати частинами",
                  "firstPayment": "можливий за бажанням клієнта <br><b>Важливо</b>! (У момент оформлення «Плати частинами» також зніметься перший платіж з картки)",
                  "creditTerm": "до 25 платежів",
                  "monthlyCommission": "<b>0,00001%</b> річних від початкової вартості товару",
                  "minPurchase": "300 ₴",
                  "maxPurchase": "Згідно з вашим лімітом",
                  "rating_popular": 4,
                  "rating_payments_max_min": 5,
                  "rating_payments_min_max": 7,
                  "rating_commission": 3,
                  "images": "4abank.png"
               },
               {
                  "id": "ukrsib",
                  "name": "Плати частинами",
                  "firstPayment": "можливий за бажанням клієнта",
                  "creditTerm": "до 10 платежів",
                  "monthlyCommission": 0,
                  "minPurchase": "300 ₴",
                  "maxPurchase": "Згідно з вашим лімітом",
                  "rating_popular": 5,
                  "rating_payments_max_min": 7,
                  "rating_payments_min_max": 5,
                  "rating_commission": 10,
                  "images": "5ukrsib.png"
               },
               {
                  "id": "globus",
                  "name": "Плати частинами",
                  "firstPayment": "можливий за бажанням клієнта",
                  "creditTerm": "до 6 платежів",
                  "monthlyCommission": 0,
                  "minPurchase": "1 000 ₴",
                  "maxPurchase": "Згідно з вашим лімітом",
                  "rating_popular": 6,
                  "rating_payments_max_min": 2,
                  "rating_payments_min_max": 10,
                  "rating_commission": 5,
                  "images": "6globus.png"
               },
               {
                  "id": "sens",
                  "name": "Плата частинами",
                  "firstPayment": 0,
                  "creditTerm": "до 18 платежів",
                  "monthlyCommission": "<b>0,01%</b> на місяць від початкової вартості товару",
                  "minPurchase": "1 000 ₴",
                  "maxPurchase": "Згідно з вашим лімітом",
                  "rating_popular": 7,
                  "rating_payments_max_min": 10,
                  "rating_payments_min_max": 2,
                  "rating_commission": 7,
                  "images": "7sense.png"
               },
               {
                  "id": "otp",
                  "name": "Плата частинами",
                  "firstPayment": "можливий за бажанням клієнта",
                  "creditTerm": "до 20 платежів",
                  "monthlyCommission": 0,
                  "minPurchase": "300 ₴",
                  "maxPurchase": "Згідно з вашим лімітом",
                  "rating_popular": 8,
                  "rating_payments_max_min": 4,
                  "rating_payments_min_max": 8,
                  "rating_commission": 4,
                  "images": "8otp.png"
               },
               {
                  "id": "factoring",
                  "name": "Сучасний факторинг",
                  "firstPayment": "можливий за бажанням клієнта",
                  "creditTerm": "до 12 місяців",
                  "monthlyCommission": "6,5% від суми кредиту",
                  "minPurchase": "3 000 ₴",
                  "maxPurchase": "50 000 ₴",
                  "rating_popular": 9,
                  "rating_payments_max_min": 11,
                  "rating_payments_min_max": 1,
                  "rating_commission": 11,
                  "images": "9factorinf.png"
               },
               {
                  "id": "novapay",
                  "name": "Посилка в кредит",
                  "firstPayment": 0,
                  "creditTerm": "до 12 місяців",
                  "monthlyCommission": "<b>3,5%</b> від суми кредиту",
                  "minPurchase": "1 000 ₴",
                  "maxPurchase": "100 000 ₴",
                  "rating_popular": 10,
                  "rating_payments_max_min": 1,
                  "rating_payments_min_max": 11,
                  "rating_commission": 2,
                  "images": "10factorinf.png"
               },
               {
                  "id": "paper",
                  "name": "Паперовий кредит",
                  "firstPayment": "можливий за бажанням клієнта",
                  "creditTerm": "до 24 платежів",
                  "monthlyCommission": "<b>3% - 3,5%</b> від вартості товару після закінчення пільгового періоду в залежності від банку",
                  "minPurchase": "300 ₴",
                  "maxPurchase": 0,
                  "rating_popular": 11,
                  "rating_payments_max_min": 9,
                  "rating_payments_min_max": 3,
                  "rating_commission": 9,
                  "images": "11factorinf.png"
               }
            ],
            activeTab: "zagalna-іnformacіja",
            activeSubTab: "",
            expandedQuestions: [],
            expandedSubTabQuestions: [],
            isModalOpen: false,
            isMobile: window.innerWidth <= 768,
            isDropdownOpen: false,
            currentFilter: "popularity",
            swiper: null
         },
         methods: {
            selectTab(tabId) {
               if (this.activeTab === tabId) return;
               this.activeTab = tabId;
               this.activeSubTab = this.getDefaultSubTab(tabId);
               this.expandedQuestions = [];
               this.expandedSubTabQuestions = [];
               this.updateURL();
               if (this.isMobile && tabId === "zagalna-іnformacіja") this.$nextTick(() => this.initSwiper());
            },
            selectSubTab(tabId, subTabId) {
               if (this.activeTab === tabId && this.activeSubTab === subTabId) return;
               this.activeTab = tabId;
               this.activeSubTab = subTabId;
               this.expandedQuestions = [];
               this.expandedSubTabQuestions = [];
               this.isModalOpen = false;
               this.updateURL();
            },
            toggleQuestion(index) {
               this.expandedQuestions = this.toggleArray(this.expandedQuestions, index);
            },
            toggleSubTabQuestion(index) {
               this.expandedSubTabQuestions = this.toggleArray(this.expandedSubTabQuestions, index);
            },
            toggleArray(arr, index) {
               return arr.includes(index) ? arr.filter(i => i !== index) : [...arr, index];
            },
            isExpanded(index) {
               return this.expandedQuestions.includes(index);
            },
            isSubTabExpanded(index) {
               return this.expandedSubTabQuestions.includes(index);
            },
            updateURL() {
               const url = `#${this.activeTab}${this.activeSubTab ? `--${this.activeSubTab}` : ""}`;
               if (window.location.hash !== url) history.pushState(null, "", url);
            },
            loadFromURL() {
               const hash = window.location.hash.replace("#", "");
               const [tabId, subTabId] = hash ? hash.split("--") : [this.tabs[0].id, ""];
               this.activeTab = this.tabs.some(tab => tab.id === tabId) ? tabId : this.tabs[0].id;
               this.activeSubTab = subTabId && this.activeTabData.subTabs?.some(sub => sub.id === subTabId)
                  ? subTabId
                  : this.getDefaultSubTab(this.activeTab);
               this.updateURL();
            },
            getDefaultSubTab(tabId) {
               const tab = this.tabs.find(t => t.id === tabId);
               return tab && tab.subTabs && tab.subTabs.length ? tab.subTabs[0].id : "";
            },
            openModal() {
               this.isModalOpen = true;
            },
            closeModal() {
               this.isModalOpen = false;
            },
            handleResize() {
               this.isMobile = window.innerWidth <= 768;
               if (!this.isMobile) this.isDropdownOpen = false;
               this.$nextTick(() => this.initSwiper());
            },
            toggleDropdown() {
               if (this.isMobile) {
                  this.isDropdownOpen = !this.isDropdownOpen;
                  console.log("Dropdown toggled:", this.isDropdownOpen);
               }
            },
            setFilter(filter) {
               console.log("Filter set to:", filter);
               this.currentFilter = filter;
               if (this.isMobile) {
                  this.isDropdownOpen = false;
                  this.$nextTick(() => {
                     console.log("Sorted banks after filter:", this.sortedBanks.map(b => b.name));
                     this.updateSwiper();
                  });
               }
            },
            initSwiper() {
               if (this.isMobile && this.activeTab === "zagalna-іnformacіja") {
                  if (this.swiper) this.swiper.destroy();
                  this.swiper = new Swiper('.mySwiper', {
                     slidesPerView: 1,
                     spaceBetween: 15,
                     centeredSlides: true,
                     initialSlide: 0,
                     navigation: {
                        nextEl: '.swiper-button-custom-next',
                        prevEl: '.swiper-button-custom-prev'
                     }
                  });
                  console.log("Swiper initialized with banks:", this.sortedBanks.map(b => b.name));
               }
            },
            updateSwiper() {
               if (this.swiper) {
                  this.swiper.destroy();
                  this.initSwiper();
               }
            }
         },
         computed: {
            activeTabData: function() {
               return this.tabs.find(tab => tab.id === this.activeTab) || {};
            },
            sortedBanks: function() {
               console.log("Sorting banks with filter:", this.currentFilter);
               let sorted = [...this.banks];
               switch (this.currentFilter) {
                  case "popularity":
                     return sorted.sort((a, b) => a.rating_popular - b.rating_popular);
                  case "termDesc":
                     return sorted.sort((a, b) => a.rating_payments_max_min - b.rating_payments_max_min);
                  case "termAsc":
                     return sorted.sort((a, b) => a.rating_payments_min_max - b.rating_payments_min_max);
                  case "commissionAsc":
                     return sorted.sort((a, b) => a.rating_commission - b.rating_commission);
                  default:
                     return sorted.sort((a, b) => a.rating_popular - b.rating_popular);
               }
            },
            activeFilterName: function() {
               const filterNames = {
                  popularity: "За популярністю",
                  termDesc: "За кількістю платежів (від найбільшої)",
                  termAsc: "За кількістю платежів (від найменшої)",
                  commissionAsc: "За комісією (від найменшої)"
               };
               return filterNames[this.currentFilter] || "За популярністю";
            }
         },
         mounted: function() {
            this.loadFromURL();
            window.addEventListener("hashchange", this.loadFromURL);
            window.addEventListener("resize", this.handleResize);
            this.$nextTick(() => this.initSwiper());
         },
         beforeDestroy: function() {
            window.removeEventListener("hashchange", this.loadFromURL);
            window.removeEventListener("resize", this.handleResize);
            if (this.swiper) this.swiper.destroy();
         }
      });
   </script>
</body>
</html>