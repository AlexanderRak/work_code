<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="style.min.css">
</head>

<body>
  <div class="apple">
    <section>
      <div class="magic">
        <div class="container">
          <div class="magic__flex">
            <div class="magic__cal">
              <video muted="true" autoplay playsinline="true" class="magic__cal__video lazyload autoplay-video">
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/9.mp4" type="video/mp4">
              </video>
              <div class="magic__cal__img">
                <img class="lazyloaded img__js" src="https://cdn.comfy.ua/media/x/img/2149520/24.png" alt="">
                <img class="lazyloaded" src="https://cdn.comfy.ua/media/x/img/2149520/25.png" alt="">
                <img class="lazyloaded" src="https://cdn.comfy.ua/media/x/img/2149520/26.png" alt="">
                <img class="lazyloaded" src="https://cdn.comfy.ua/media/x/img/2149520/27.png" alt="">
              </div>
            </div>
            <div class="magic__txt grad show__">
              Новый iPhone - новые правила игры. <br>
              Выбирай свой стиль - изящные цвета для требовательных пользователей в 4х вариантах:
            </div>
            <div class="magic__cal">
              <div class="magic__txt grad hide__">
                Новый iPhone - новые правила игры. <br>
                Выбирай свой стиль - изящные цвета для требовательных пользователей в 4х вариантах:
              </div>
              <div class="magic__cal__nav">
                <div class="magic__cal__nav__item">Deep Purple</div>
                <div class="magic__cal__nav__item">Silver</div>
                <div class="magic__cal__nav__item">Gold</div>
                <div class="magic__cal__nav__item">Space Black</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="face">
        <div class="face__bg"></div>
        <div class="container">
          <div class="face__flex">
            <div class="face__cal">
              <img class="hide__ lazyloaded" src="https://cdn.comfy.ua/media/x/img/2149520/v1.png" alt="">
              <video class="hide__ lazyload autoplay-video face__cal__video__one" muted="true" loop playsinline="true" autoplay>
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/3.webm" type="video/webm">
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/3.mp4" type="video/mp4">
              </video>
              <video class="hide__ lazyload autoplay-video face__cal__video__two" muted="true" loop playsinline="true" autoplay>
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/4.webm" type="video/webm">
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/4.mp4" type="video/mp4">
              </video>
              <video class="hide__ lazyload autoplay-video face__cal__video__three" muted="true" loop playsinline="true" autoplay>
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/1.webm" type="video/webm">
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/1.mp4" type="video/mp4">
              </video>
              <video class="hide__ lazyload autoplay-video" muted="true" loop playsinline="true" autoplay>
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/2.webm" type="video/webm">
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/2.mp4" type="video/mp4">
              </video>
            </div>
            <div class="face__cal">
              <div class="show__">
                <img class="lazyloaded" src="https://cdn.comfy.ua/media/x/img/2149520/v1.png" alt="">
                <video class="lazyload autoplay-video face__cal__video__one" muted="true" loop playsinline="true" autoplay>
                  <source src="https://cdn.comfy.ua/media/video/iphone14pro/3.webm" type="video/webm">
                  <source src="https://cdn.comfy.ua/media/video/iphone14pro/3.mp4" type="video/mp4">
                </video>
                <video class="lazyload autoplay-video face__cal__video__two" muted="true" loop playsinline="true" autoplay>
                  <source src="https://cdn.comfy.ua/media/video/iphone14pro/4.webm" type="video/webm">
                  <source src="https://cdn.comfy.ua/media/video/iphone14pro/4.mp4" type="video/mp4">
                </video>
              </div>

              <div class="face__title">
                Новое лицо <br>
                iPh<i></i>ne.
                <div class="face__title__bg"></div>
              </div>
              <video class="show__ lazyload autoplay-video" muted="true" loop playsinline="true" autoplay>
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/1.webm" type="video/webm">
                <source src="https://cdn.comfy.ua/media/video/iphone14pro/1.mp4" type="video/mp4">
              </video>
              <div class="face__txt__grad">
                Dynamic Island - остров быстрого доступа <br><br>

                Инновационное решение от Apple вместо классической челки. Теперь с помощью <br> этого меню можно быстро включить музыку, посмотреть спортивные <br> результаты, вызвать FaceTime.
              </div>
              <div class="face__title__grad grad hide__">
                Дисплей, который <br> всегда готов <br> к работе.
              </div>
              <div class="face__txt__flex hide__">
                <div class="face__txt__flex__item">
                  <p>
                    Больше нет блокировки экрана — iPhone всегда готов <br> к работе.
                  </p>
                </div>
                <div class="face__txt__flex__item">
                  <p>Даже когда он в кармане или перевернут лицевой стороной вниз, экран просто затемняется, но никогда не выключается.</p>
                </div>
              </div>
              <div class="all__day__wrap">
                <div class="all__day__wrap__bg">
                  <video class="show__ lazyload autoplay-video" muted="true" loop playsinline="true" autoplay>
                    <source src="https://cdn.comfy.ua/media/video/iphone14pro/2.webm" type="video/webm">
                    <source src="https://cdn.comfy.ua/media/video/iphone14pro/2.mp4" type="video/mp4">
                  </video>
                  <div class="all__day__abs">
                    <div class="all__day grad">
                      Батарея, которой хватает на весь день. Без подзарядки.
                    </div>
                    <div class="all__day__txt">
                      <p>Даже со всеми новыми <br> возможностями. Мощности <br> хватит на всё.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="camera">
        <div class="container">
          <div class="camera__flex">
            <div class="camera__cal">
              <img class="lazyloaded" src="https://cdn.comfy.ua/media/x/img/2149520/4.png" alt="">
            </div>
            <div class="camera__cal">
              <div class="camera__title">
                <div>
                  Система камер <br>
                  становится еще больше <br>
                </div>
                <strong>Pro</strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="new__cam">
        <div class="container">
          <div class="new__cam__flex">
            <div class="new__cam__cal hide__mob">
              <img class="lazyloaded" src="https://cdn.comfy.ua/media/x/img/2149520/5.png" alt="">
            </div>
            <div class="new__cam__cal">
              <div class="new__cam__txt">
                Невероятная детализация с 48-мегапиксельной камерой для самых качественных снимков.
              </div>
              <p>В 4 раза большее разрешение у ProRAW для невероятной детализации любого кадра.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="sensor">
        <div class="container">
          <div class="sensor__bg__flex">
            <div class="sensor__bg__item">
              <img class="lazyloaded" src="https://cdn.comfy.ua/media/x/img/2149520/6n.png" alt="">
            </div>
            <div class="sensor__bg__item">
              <img class="lazyloaded" src="https://cdn.comfy.ua/media/x/img/2149520/7n.png" alt="">
            </div>
          </div>
          <div class="sensor__abs">
            <strong>На <i>65%</i></strong>
            больше датчик, <br>
            чем iPhone 13 Pro
          </div>
          <div class="sensor__hor">
            <div class="sensor__hor__item">
              <div class="sensor__hor__img">
                <video class="lazyload autoplay-video" muted="true" loop playsinline="true" autoplay>
                  <source src="https://cdn.comfy.ua/media/video/iphone14pro/5.webm" type="video/webm">
                  <source src="https://cdn.comfy.ua/media/video/iphone14pro/5.mp4" type="video/mp4">
                </video>
              </div>
              <div class="sensor__hor__txt">
                <strong class="grad">Кинематографический режим</strong> теперь снимает в 4K <br> HDR со скоростью 24 кадра в секунду — по <br> стандартам киноиндустрии.
              </div>
            </div>
            <div class="sensor__hor__item">
              <div class="sensor__hor__img">
                <video class="lazyload autoplay-video" muted="true" loop playsinline="true" autoplay>
                  <source src="https://cdn.comfy.ua/media/video/iphone14pro/6.webm" type="video/webm">
                  <source src="https://cdn.comfy.ua/media/video/iphone14pro/6.mp4" type="video/mp4">
                </video>
              </div>
              <div class="sensor__hor__txt__flex">
                <div class="sensor__hor__title grad">
                  Action mode
                </div>
                <div class="sensor__hor__txt">
                  Шаткий кадр? <br>
                  Исправьте это!
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="proc">
        <div class="container">
          <div class="proc__img">
            <video class="lazyload autoplay-video" muted="true" autoplay loop playsinline="true">
              <source src="https://cdn.comfy.ua/media/video/iphone14pro/7.mp4" type="video/mp4">
            </video>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="protect">
        <div class="container">
          <div class="protect__title grad">
            Экран защищен от пыли для <br> более приятных тактильных ощущений.
          </div>
          <div class="protect__bg">
            <video class="lazyload autoplay-video" muted="true" autoplay loop playsinline="true">
              <source src="https://cdn.comfy.ua/media/video/iphone14pro/8.webm" type="video/webm">
              <source src="https://cdn.comfy.ua/media/video/iphone14pro/8.mp4" type="video/mp4">
            </video>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="custom">
        <div class="container">
          <div class="custom__title grad__two">
            Кастомизируйте свой iPhone
          </div>
        </div>
        <div class="custom__slider">
          <div class="custom__slide custom__slide__one">
            <div class="custom__slide__title__flex">
              <div class="custom__slide__title grad__two">
                MagSafe Case
              </div>
              <img class="arrow animate__headShake" src="https://cdn.comfy.ua/media/x/img/2149520/arrow.svg" alt="">
            </div>
            <div class="custom__slide__img">
              <img src="https://cdn.comfy.ua/media/x/img/2149520/28.png" alt="">
            </div>
            <a target="_blank" class="custom__slide__btn" href="https://comfy.ua/chehol-dlja-smartfona-apple-iphone-14-pro-max-clear-case-with-magsafe-mpu73.html">К товару</a>
            <div class="custom__slide__title__abs grad">
              MagSafe <br> Case
            </div>
          </div>
          <div class="custom__slide custom__slide__two">
            <div class="custom__slide__title__flex">
              <div class="custom__slide__title grad__two">
                MagSafe Charger
              </div>
              <img class="arrow" src="https://cdn.comfy.ua/media/x/img/2149520/arrow.svg" alt="">
            </div>
            <div class="custom__slide__img">
              <img src="https://cdn.comfy.ua/media/x/img/2149520/29n.png" alt="">
            </div>
            <a target="_blank" class="custom__slide__btn" href="https://comfy.ua/besprovodnoe-zarjadnoe-ustrojstvo-apple-magsafe-charger-mhxh3ze-a.html">К товару</a>
            <div class="custom__slide__title__abs grad">
              MagSafe Charger
            </div>
          </div>
          <div class="custom__slide custom__slide__three">
            <div class="custom__slide__icon">
              <img src="https://cdn.comfy.ua/media/x/img/2149520/30.png" alt="">
            </div>
            <div class="custom__slide__title__flex">
              <div class="custom__slide__title grad__two">
                Adapter
              </div>
              <img class="arrow" src="https://cdn.comfy.ua/media/x/img/2149520/arrow.svg" alt="">
            </div>
            <div class="custom__slide__img">
              <img src="https://cdn.comfy.ua/media/x/img/2149520/31.png" alt="">
            </div>
            <a target="_blank" class="custom__slide__btn" href="https://comfy.ua/setevoe-zarjadnoe-ustrojstvo-apple-20w-usb-c-power-adapter-mhje3zm-a.html">К товару</a>
            <div class="custom__slide__title__abs grad">
              Adapter
            </div>
          </div>
          <div class="custom__slide custom__slide__four">
            <div class="custom__slide__title__flex">
              <div class="custom__slide__title grad__two">
                Максимальная защита
              </div>
              <img class="arrow" src="https://cdn.comfy.ua/media/x/img/2149520/arrow.svg" alt="">
            </div>
            <div class="custom__slide__subtitle grad__two">
              Услуга действует 2 года с момента приобретения!
            </div>
            <div class="custom__slide__title__abs grad">
              Protection
            </div>
            <div class="custom__slide__txt">
              Услуга, которая отремонтирует и защитит гаджет от любой поломки!
            </div>
            <a target="_blank" class="custom__slide__btn" href="https://comfy.ua/servis-maksimal-nij-zahist.html">К товару</a>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="comlete">
        <div class="comlete__bold grad__two">
          Комплектация
        </div>
        <div class="comlete__abs grad">
          Комплектация
        </div>
        <div class="container">
          <div class="comlete__flex">
            <div class="comlete__item">
              <img style="width: 260px;" src="https://cdn.comfy.ua/media/x/img/2149520/32.png" alt="">
            </div>
            <div class="comlete__item">
              <img style="width: 282px;" src="https://cdn.comfy.ua/media/x/img/2149520/33.png" alt="">
            </div>
            <div class="comlete__item">
              <img style="width: 213px;" src="https://cdn.comfy.ua/media/x/img/2149520/34.png" alt="">
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js" integrity="sha512-gmwBmiTVER57N3jYS3LinA9eb8aHrJua5iQD7yqYCKa5x6Jjc7VDVaEA0je0Lu0bP9j7tEjV3+1qUm6loO99Kw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js" integrity="sha512-tHvUcUQYi35zApvAa5TNR3fNhBQkVtkmWKfacnpxmix4/VTGz1lGjIVyLMp7gLgAvg+aKJjnVKokXJNS5GZ+/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      gsap.registerPlugin(ScrollTrigger);
      gsap.config({ trialWarn: false });

      const title = document.querySelector(".face__title__bg"),
        bg = document.querySelector(".face__bg"),
        txt = document.querySelector(".face__txt__grad"),
        titleTwo = document.querySelector(".all__day"),
        txtTwo = document.querySelector(".all__day__txt"),
        sensor = document.querySelector(".sensor__hor");


      let tlFour = gsap.timeline();
      let mm = gsap.matchMedia();

      ScrollTrigger.defaults({
        markers: false
      });

      mm.add({
        isBig: "(max-width: 1600px) and (min-width: 1026px)",
        isBigest: "(min-width: 1600px)",
        isTablet: "(min-width: 1023px) and (max-width: 1025px)",
        isNotMob: "(max-width: 991px)",
      }, (context) => {
        let { isBig, isBigest, isTablet, isNotMob } = context.conditions;

        if (!isNotMob) {
          gsap.to(sensor, {
            // xPercent: isBig ? -50 : -100,
            xPercent: () => {
              if (isBig) {
                return -50
              } else if (isBigest || isTablet) {
                return -100
              }
            },
            scrollTrigger: {
              trigger: sensor,
              start: 'top-=15% top',
              // start: 'top-=10% top',
              end: `+=${sensor.offsetWidth}`,
              onUpdate: (self) => {
                ScrollTrigger.refresh();
              },
              pin: true,
              scrub: 0.5
            }
          });
        };

        let tl = gsap.timeline({
          defaults: {
            duration: 1,
            ease: "none"
          }
        });

        let tlTwo = gsap.timeline({
          defaults: {
            duration: 1,
            ease: "none"
          }
        });

        let tlThree = gsap.timeline({
          defaults: {
            duration: 1,
            ease: "none"
          }
        });

        tl.fromTo(title, { yPercent: 0 }, { yPercent: -74 }, 0);

        ScrollTrigger.create({
          animation: tl,
          trigger: ".face",
          start: "top center",
          end: "+=50%",
          scrub: true
        });

        // if (!isNotMob) {
        if (!isNotMob) {
          tlTwo.fromTo(bg, { yPercent: 100, opacity: 0 }, { yPercent: 0, opacity: 0.8 }, 0.7)
            .fromTo(txt, { opacity: 0, yPercent: -100 }, { opacity: 1, yPercent: 0 }, 1);

          ScrollTrigger.create({
            animation: tlTwo,
            trigger: ".face__txt__grad",
            start: "top bottom",
            end: "bottom+=10% top+=20%",
            scrub: true
          });
        } else {
          tlTwo.fromTo(bg, { yPercent: 10, opacity: 0 }, { yPercent: 0, opacity: 0.8 }, 0.7)
            .fromTo(txt, { opacity: 0, yPercent: -70 }, { opacity: 1, yPercent: 0 }, 1);

          ScrollTrigger.create({
            animation: tlTwo,
            // markers: true,
            trigger: ".face__txt__grad",
            start: "top+=20% center",
            end: "bottom center-=20%",
            scrub: 1
          });
        }



        if (!isNotMob) {
          tlThree.fromTo(titleTwo, { opacity: 1 }, { opacity: 0 }, 0)
            .fromTo(txtTwo, { opacity: 1 }, { opacity: 0 }, 0);

          ScrollTrigger.create({
            animation: tlThree,
            trigger: ".all__day",
            start: "bottom center",
            end: "bottom top",
            scrub: true
          });
        }
        // }
        window.onload = function () {
          ScrollTrigger.refresh(true);
        }
      }
      );

      //select color

      const magic = document.querySelector('.magic');
      const vidos = document.querySelector('.magic__cal__video');
      let photos = document.querySelectorAll('.magic__cal__img img');
      let navsParent = document.querySelector('.magic__cal__nav');
      let navs = document.querySelectorAll('.magic__cal__nav__item');

      vidos.addEventListener('ended', endVidos, false);

      function endVidos() {
        vidos.classList.add('__hide');
        showPhoto();
        changeColor();
      };

      function hidePhoto() {
        photos.forEach(element => {
          element.classList.add('__hide');
          element.classList.remove('__show');
        });

        navs.forEach(element => {
          element.classList.remove('grad');
        });
      }

      hidePhoto();
      activeBtn();

      function showPhoto(i = 0) {
        photos[i].classList.remove('__hide');
        photos[i].classList.add('__show');
      };

      function activeBtn(i = 0) {
        navs[i].classList.add('grad');
      }

      function changeColor() {
        navsParent.addEventListener('mouseover', (event) => {
          const target = event.target;

          if (target && target.classList.contains('magic__cal__nav__item')) {
            navs.forEach((item, i) => {
              if (target == item) {
                hidePhoto()
                showPhoto(i);
                activeBtn(i);
              }
            });
          }
        });
      }

      // dots for slick

      // const jsBg = document.querySelector('.i13-img-bg');
      // const jsBtn = document.querySelector('.js-custom-common-btn');
      // let widthJsBg = jsBg.offsetWidth;

      // // window.onload = function () {
      // const jsDots = document.querySelector('.slick-dots');

      // function rWindow() {
      //   if (document.documentElement.clientWidth < 576) {
      //     jsBtn.style.maxWidth = widthJsBg + "px";
      //     jsDots.style.maxWidth = widthJsBg + "px";
      //   }
      // };

      // rWindow();
      // };

    });
  </script>


  <!-- slick -->

  <script>
    (function ($) {
      $(document).ready(function () {
        $('.custom__slider').slick({
          infinite: true,
          prevArrow: false,
          draggable: false,
          adaptiveHeight: true,
          nextArrow: $('.arrow'),
          responsive: [{
            breakpoint: 1025,
            settings: {
              adaptiveHeight: true
            },
            breakpoint: 576,
            settings: {
              draggable: true
            }
          }]
        });
      });
    })(jQuery)
  </script>

  <script>
    $(document).on('general-tab-open', () => {
      document.querySelectorAll('.autoplay-video').forEach((element) => {
        element.play();
      })
    })
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const videoJs = document.querySelector('.magic__cal__video');

      videoJs.pause();
      videoJs.currentTime = 0;

      let videoVisibleOne = function (targetOne) {
        let targetOnePosition = {
          top: window.pageYOffset + targetOne.getBoundingClientRect().top,
          bottom: window.pageYOffset + targetOne.getBoundingClientRect().bottom
        },
          windowPositionOne = {
            top: window.pageYOffset,
            bottom: window.pageYOffset + document.documentElement.clientHeight
          };

        if (targetOnePosition.bottom > windowPositionOne.top &&
          targetOnePosition.top < windowPositionOne.bottom) {
          targetOne.play();
        } else {
          targetOne.pause();
        };
      };

      window.addEventListener('scroll', function () {
        videoVisibleOne(videoJs);
      });

      videoVisibleOne(videoJs);

    });
  </script>

  <!-- video starting -->

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      let vidosOne = document.querySelectorAll('.face__cal__video__one'),
        vidosTwo = document.querySelectorAll('.face__cal__video__two');
      vidosThree = document.querySelectorAll('.face__cal__video__three');

      function stopVideos(e) {
        e.forEach(element => {
          element.currentTime = 0;
          element.pause();
        });
      }

      stopVideos(vidosOne);
      stopVideos(vidosTwo);
      stopVideos(vidosThree);

      let videoVisible = function (target) {
        let targetPosition = {
          top: window.pageYOffset + target.getBoundingClientRect().top,
          bottom: window.pageYOffset + target.getBoundingClientRect().bottom
        },
          windowPosition = {
            top: window.pageYOffset,
            bottom: window.pageYOffset + document.documentElement.clientHeight
          };

        if (targetPosition.bottom > windowPosition.top &&
          targetPosition.top < windowPosition.bottom) {
          target.play();
        } else {
          target.pause();
        };
      };

      vidosOne.forEach(element => {
        window.addEventListener('scroll', function () {
          videoVisible(element);
        });

        videoVisible(element);

        element.addEventListener('timeupdate', () => {
          if (element.currentTime >= 2.5) {
            vidosTwo.forEach(j => {
              j.play();
              if (j.currentTime >= 2) {
                vidosThree.forEach(g => {
                  g.play();
                });
              }
            });
          }
        });
      });

    });

  </script>

  <!-- invisible replace image -->

  <script>
    window.addEventListener('load', () => {
      const imgJs = document.querySelector('.img__js');

      imgJs.classList.remove('lazyloaded', 'lazyload');

      function initlazyimg() {
        var datasrc = imgJs.getAttribute('data-src');
        var src = document.createAttribute('src');
        src.value = datasrc;
        imgJs.setAttributeNode(src);
        imgJs.removeAttribute('datasrc');
      }

      initlazyimg();
    });
  </script>
</body>

</html>